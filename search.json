[{"path":"https://mattblackwell.github.io/DirectEffects/articles/DirectEffects.html","id":"quantity-of-interest","dir":"Articles","previous_headings":"","what":"Quantity of interest","title":"Estimating controlled direct effects","text":"briefly introduce statistical theory behind estimating direct effects. main quantity interest average controlled direct effect ACDE. can illustrated following causal structure (Acharya, Blackwell, Sen 2016, fig. 3): average controlled direct effect defined given treatment (Ai=aA_i = vs.¬†Ai=‚Ä≤A_i = ^\\prime) given value mediator (Mi=mM_i = m) ACDE(,‚Ä≤,m)=E[Yi(,m)‚àíYi(‚Ä≤,m)]ACDE(, ^\\prime, m) = E[Y_i(, m) - Y_i(^\\prime, m)] total dashed lines figure . Thus, hold mediator constant comparing outcome treatment. ACDE useful discriminating causal mechanisms, average total effect treatment, œÑ(,‚Ä≤)‚â°E[Yi()‚àíYi(‚Ä≤)]\\tau(, ^\\prime) \\equiv E[Y_i() - Y_i(^\\prime)], can decomposed sum three quantities: (1) ACDE, (2) average natural indirect effect, (3) reference interaction measures much direct effect AiA_i depends particular Mi=mM_i = m. Thus, ACDE non-zero, evidence effect AiA_i entirely explained MiM_i. illustrate empirical example. information , see Acharya, Blackwell, Sen (2016).","code":""},{"path":"https://mattblackwell.github.io/DirectEffects/articles/DirectEffects.html","id":"implementation","dir":"Articles","previous_headings":"","what":"Implementation","title":"Estimating controlled direct effects","text":"vignette introduces new way design, specify, implement various estimators controlled direct effects using coding style refer ‚Äúassembly line.‚Äù Users can specify various components estimators sequentially easily swap implementation details exact estimators used estimation nuisance function arguments pass functions. unified structure output across different research designs estimators make comparing estimators easy. Finally, implementation built around idea cross-fitting nuisance function estimation. Let‚Äôs see works practice. first load subset jobcorps data package: Job Corps experiment data used Huber (2014) estimate effect randomized job training program self-assessed health holding constant intermediate outcome employment. use subset variables study, basic variable use : YiY_i indicator whether participants reported ‚Äúgood‚Äù health 2.5 years randomization (exhealth30) AiA_i indicator assignment job training program (treat) MiM_i indicator employment 1 1.5 years assignment (work2year2q) ZiZ_i post-treatment, pre-mediator intermediate confounders (emplq4, pemplq4) XiX_i pre-treatment characteristics (female, age_cat) context CDE estimators, refer AiA_i (treatment) MiM_i (mediator) treatment variables interested causal effects contrast different combinations two variables. first step assembly line choose type CDE estimator (really estimation strategy) want pursue. choices include IPW (cde_ipw()), regression imputation (cde_reg_impute()), augmented IPW (cde_aipw()) among others. different functions take different arguments specify different aspects estimator. AIPW estimator useful demonstrate uses many features assembly line approach. call consists several steps connected R‚Äôs pipe operator. first call cde_aipw() simply initializes estimator taking AIPW form, meaning use propensity score models outcome regressions estimate causal effects. Following two blocks 3 lines look similar differences. ‚Äútreatment blocks‚Äù specify causal variables interest causal ordering. set_treatment() set name treatment variable give formula describing pre-treatment covariates treatment. formula, unless overridden next two functions, used fitting propensity score outcome regression models. treat_model() allows user specify fit propensity score model treatment choice engine optional arguments pass engine. outreg_model() outcome regression. repeat specification mediator. estimate() function finally implements specifications given previous commands. Users use formula set outcome treatment variables want effects indicate data frame variables can found. default, nuisance functions (propensity score model outcome regression) fit using cross-fitting. can either use summary() tidy() functions get summary different effects estimated: estimate() function included treat work2year2q formula, output includes controlled direct effects treatment conditional average treatment effect mediator. Furthermore, default, output contains estimates effect combination treatment variables. can changed setting eval_vals argument relevant set_treatment() call. modular structure call allow users easily swap parts models. example, easily alter call use lasso versions regression logit model. use ‚Äúrigorous‚Äù version lasso hdm package speed computation. number different engines different outcome treatment types including: GLMs: lm (OLS), logit (logistic regression), multinom (mulitnomial logit) LASSO estimators (glmnet): lasso, lasso_logit, lasso_multinom Rigorous LASSO estimator (hdm): rlasso, rlasso_logit","code":"data(\"jobcorps\") jc <- jobcorps[   1:200,   c(\"treat\", \"female\", \"age_cat\", \"work2year2q\", \"pemplq4\", \"emplq4\", \"exhealth30\") ] my_aipw <- cde_aipw() |>   set_treatment(treat, ~ female + age_cat) |>   treat_model(engine = \"logit\") |>   outreg_model(engine = \"lm\") |>   set_treatment(work2year2q, ~ emplq4 + pemplq4) |>   treat_model(engine = \"logit\") |>   outreg_model(engine = \"lm\") |>   estimate(exhealth30 ~ treat + work2year2q, data = jobcorps) summary(my_aipw) ##  ##  aipw CDE Estimator ## --------------------------- ## Causal variable: treat  ##  ## Treatment model: treat ~ female + age_cat  ## Treatment engine: logit  ##  ## Outcome model: ~female + age_cat  ## Outcome engine: lm  ## --------------------------- ## Causal variable: work2year2q  ##  ## Treatment model: work2year2q ~ emplq4 + pemplq4 + female + age_cat  ## Treatment engine: logit  ##  ## Outcome model: ~emplq4 + pemplq4 + female + age_cat  ## Outcome engine: lm  ## --------------------------- ## Cross-fit: TRUE  ## Number of folds: 5  ##  ## Estimated Effects: ##                                  Estimate Std. Error t value Pr(>|t|)  CI Lower ## treat [(1, 0) vs. (0, 0)]        0.035713    0.02243  1.5923  0.11141 -0.008261 ## treat [(1, 1) vs. (0, 1)]        0.029432    0.01397  2.1068  0.03517  0.002046 ## work2year2q [(0, 1) vs. (0, 0)]  0.005647    0.02056  0.2747  0.78354 -0.034653 ## work2year2q [(1, 1) vs. (1, 0)] -0.002415    0.01661 -0.1454  0.88440 -0.034975 ##                                 CI Upper   DF ## treat [(1, 0) vs. (0, 0)]        0.07969 3818 ## treat [(1, 1) vs. (0, 1)]        0.05682 6207 ## work2year2q [(0, 1) vs. (0, 0)]  0.04595 3991 ## work2year2q [(1, 1) vs. (1, 0)]  0.03015 6034 tidy(my_aipw) ##                                            term     estimate  std.error ## treat_1_0             treat [(1, 0) vs. (0, 0)]  0.035713274 0.02242931 ## treat_1_1             treat [(1, 1) vs. (0, 1)]  0.029432067 0.01396992 ## work2year2q_0_1 work2year2q [(0, 1) vs. (0, 0)]  0.005647071 0.02055532 ## work2year2q_1_1 work2year2q [(1, 1) vs. (1, 0)] -0.002414928 0.01660949 ##                  statistic    p.value     conf.low  conf.high   df ## treat_1_0        1.5922593 0.11140923 -0.008261301 0.07968785 3818 ## treat_1_1        2.1068168 0.03517349  0.002046182 0.05681795 6207 ## work2year2q_0_1  0.2747256 0.78354131 -0.034652831 0.04594697 3991 ## work2year2q_1_1 -0.1453945 0.88440430 -0.034975457 0.03014560 6034 my_aipw_lasso <- cde_aipw() |>   set_treatment(treat, ~ female + age_cat) |>   treat_model(engine = \"rlasso_logit\") |>   outreg_model(engine = \"rlasso\") |>   set_treatment(work2year2q, ~ emplq4 + pemplq4) |>   treat_model(engine = \"rlasso_logit\") |>   outreg_model(engine = \"rlasso\") |>   estimate(exhealth30 ~ treat + work2year2q, data = jobcorps)"},{"path":[]},{"path":"https://mattblackwell.github.io/DirectEffects/articles/did_cde.html","id":"difference-in-differences-designs","dir":"Articles","previous_headings":"","what":"Difference-in-differences Designs","title":"Difference-in-differences Designs","text":"researchers pretreatment measurements outcome mediator, can use difference--differences () approach estimating controlled direct effects -CDEciteTKTK. approach can take full advantage doubly robust estimation models. Generally speaking, approach selection--observable approach similar, differences. First, outcome represent difference pretreatment posttreatment measurements outcome. Second, one must specify name variable measuring pretreatment values mediator since estimates conditional variable. Third, two different quantities interest setting can estimated, depending one wants condition assumptions one wants make. article, demonstrate estimation CDEs setting using data field experiment BKciteTKTK. experiment consisted one baseline survey (t0) four posttreatment surveys (t1 t4). experiment, authors randomly assigned door--door intervention either engage conversation promoting transgender rights (treated == 1) control conversation recycling (treated == 0). goal estimate direct effect treatment fixing values posttreatment subjective feelings transgender people (therm_trans_t2, measured wave 2). outcome interest support transgender nondiscrimination law (nondiscrim_law_t3, measured wave 3). Baseline covariates consist several survey measures (labeled t0) several variables matched voter file (labeled vf). baseline measures include pretreatment measurements mediator (therm_trans_t0) outcome (nondiscrim_law_t0). purposes estimation, use difference pre posttreatment outcomes (nondiscrim_law_diff) outcome models . measure intermediate confounders wave 1 (t1). can see brief view data :","code":"library(tidyverse) ## ‚îÄ‚îÄ Attaching core tidyverse packages ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ tidyverse 2.0.0 ‚îÄ‚îÄ ## ‚úî dplyr     1.1.4     ‚úî readr     2.1.5 ## ‚úî forcats   1.0.0     ‚úî stringr   1.5.1 ## ‚úî ggplot2   3.5.1     ‚úî tibble    3.2.1 ## ‚úî lubridate 1.9.3     ‚úî tidyr     1.3.1 ## ‚úî purrr     1.0.2      ## ‚îÄ‚îÄ Conflicts ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ tidyverse_conflicts() ‚îÄ‚îÄ ## ‚úñ dplyr::filter() masks stats::filter() ## ‚úñ dplyr::lag()    masks stats::lag() ## ‚Ñπ Use the conflicted package (<http://conflicted.r-lib.org/>) to force all conflicts to become errors library(DirectEffects) data(transphobia) transphobia ## # A tibble: 501 √ó 19 ##    treated nondiscrim_law_t3 therm_trans_t2 therm_obama_t1 gender_norm_moral_t1 ##      <dbl>             <dbl>          <dbl>          <dbl>                <dbl> ##  1       0               1                0             71                   -2 ##  2       1               3                2            100                    0 ##  3       0              NA               NA             NA                   NA ##  4       1               0                1            100                    0 ##  5       0               1                1              0                   -1 ##  6       0               1                1             74                    0 ##  7       1               2.5             NA            100                    1 ##  8       1              NA               NA            100                    0 ##  9       1              NA               NA             NA                   NA ## 10       1              NA               NA             NA                   NA ## # ‚Ñπ 491 more rows ## # ‚Ñπ 14 more variables: nondiscrim_law_t0 <dbl>, therm_trans_t0 <dbl>, ## #   therm_obama_t0 <dbl>, gender_norm_moral_t0 <dbl>, ideology_t0 <dbl>, ## #   religious_t0 <dbl>, exposure_trans_t0 <dbl>, pid_t0 <dbl>, ## #   vf_democrat <dbl>, vf_female <dbl>, vf_hispanic <dbl>, vf_black <dbl>, ## #   vf_age <dbl>, nondiscrim_law_diff <dbl>"},{"path":"https://mattblackwell.github.io/DirectEffects/articles/did_cde.html","id":"specifying-conditioning-sets","dir":"Articles","previous_headings":"Difference-in-differences Designs","what":"Specifying conditioning sets","title":"Difference-in-differences Designs","text":"One key step estimating CDEs specify covariates condition propensity score outcome regression. can specify relevant call treat_model outreg_model, often useful define formulas separately (perhaps use several different models). , propensity score model treatment includes baseline mediator treatment randomly assigned. outcome regression treatment, include baseline covariates efficiency reasons. mediator models, include baseline intermediate covariates.","code":"## Propensity score model for treatment ps_t_mod <- treated ~ therm_trans_t0  ## Propensity score model for treatment ps_m_mod <- therm_trans_t2 ~ treated + therm_trans_t0 + gender_norm_moral_t0 +   therm_obama_t0 + vf_democrat + vf_female + vf_black + vf_hispanic +   gender_norm_moral_t1 + therm_obama_t1   ## Outcome models for treatment (short regression) or_t_mod <- nondiscrim_law_diff ~  treated + therm_trans_t0 +   gender_norm_moral_t0 + therm_obama_t0 + vf_democrat + vf_female +   vf_black + vf_hispanic   ## outcome model for mediator (long regression) or_m_mod <- nondiscrim_law_diff ~ treated + therm_trans_t0 + therm_trans_t2 +   gender_norm_moral_t0 + therm_obama_t0 + vf_democrat + vf_female + vf_black +   vf_hispanic  + gender_norm_moral_t1 + therm_obama_t1"},{"path":"https://mattblackwell.github.io/DirectEffects/articles/did_cde.html","id":"estimating-the-acde","dir":"Articles","previous_headings":"Difference-in-differences Designs","what":"Estimating the ACDE","title":"Difference-in-differences Designs","text":"now turn estimation. main building block approach cde_did_aipw() function. Like cde_aipw() function, trim argument trims propensity score weights keep estimates stable aipw_blip logical indicates whether estimator use doubly-robust estimator intermediate ‚Äúblipped-‚Äù regression functions. several arguments unique setting. First, base_mediator argument specifies variable data frame contain baseline (, pretreatment) mediator. estimates conditional variable discrete. Second, on_treated logical argument indicates estimand conditional treated constant value mediator time. specify entire chain estimators, using multinom mediator three levels (feeling cool, neutral, warm toward transgender people). Notice set include_past FALSE mediator models explicitly included covariates model specifications. addition, use difference posttreatment pretreatment outcomes depedent variable specification. Using default on_treated == FALSE implies estimating DIDCDEciteTKTK calls baseline conditional ACDE ACDE-BC. can view output , ACDE-BCs using summary(). also displays marginalized ACDE-BC averages conditional effects distribution baseline mediator. can see statistically significant ACDE-BC neutral group (m = 1), cool warm groups. One can also use tidy() function broom package easily extract information: allows easy plotting results using ggpplot2:  Setting on_treated TRUE, hand, estimates path-conditional ACDE ACDE-PC.","code":"out_dr_ml <- cde_did_aipw(base_mediator = therm_trans_t0, trim = c(0.01, 0.99)) |>   set_treatment(treated) |>   treat_model(engine = \"logit\", ps_t_mod) |>   outreg_model(engine = \"lm\", or_t_mod, separate = FALSE) |>   set_treatment(therm_trans_t2) |>   treat_model(engine = \"multinom\", ps_m_mod, separate = FALSE, include_past = FALSE) |>   outreg_model(engine = \"lm\", or_m_mod, separate = FALSE, include_past = FALSE) |>   estimate(nondiscrim_law_diff ~ treated, data = transphobia, n_folds = 5) summary(out_dr_ml) ##  ##  did_aipw CDE Estimator ## --------------------------- ## Causal variable: treated  ##  ## Treatment model: treated ~ therm_trans_t0  ## Treatment engine: logit  ##  ## Outcome model: ~treated + therm_trans_t0 + gender_norm_moral_t0 + therm_obama_t0 +      vf_democrat + vf_female + vf_black + vf_hispanic  ## Outcome engine: lm  ## --------------------------- ## Causal variable: therm_trans_t2  ##  ## Treatment model: therm_trans_t2 ~ treated + therm_trans_t0 + gender_norm_moral_t0 +      therm_obama_t0 + vf_democrat + vf_female + vf_black + vf_hispanic +      gender_norm_moral_t1 + therm_obama_t1  ## Treatment engine: multinom  ##  ## Outcome model: ~treated + therm_trans_t0 + therm_trans_t2 + gender_norm_moral_t0 +      therm_obama_t0 + vf_democrat + vf_female + vf_black + vf_hispanic +      gender_norm_moral_t1 + therm_obama_t1  ## Outcome engine: lm  ## --------------------------- ## Cross-fit: TRUE  ## Number of folds: 5  ##  ## Estimated Effects: ##                             Estimate Std. Error t value Pr(>|t|) CI Lower ## treated [(1, 0) vs. (0, 0)]  -1.0250     0.7024  -1.459 0.148844  -2.4252 ## treated [(1, 1) vs. (0, 1)]   1.0047     0.3665   2.741 0.006936   0.2799 ## treated [(1, 2) vs. (0, 2)]   0.3450     0.2606   1.324 0.187467  -0.1697 ## treated [(1, *) vs. (0, *)]   0.2963     0.2561   1.157 0.247929  -0.2072 ##                             CI Upper  DF ## treated [(1, 0) vs. (0, 0)]   0.3752  72 ## treated [(1, 1) vs. (0, 1)]   1.7294 138 ## treated [(1, 2) vs. (0, 2)]   0.8596 159 ## treated [(1, *) vs. (0, *)]   0.7999 369 tidy(out_dr_ml) ##                                    term   estimate std.error statistic ## treated_1_0 treated [(1, 0) vs. (0, 0)] -1.0249682 0.7023920 -1.459254 ## treated_1_1 treated [(1, 1) vs. (0, 1)]  1.0046603 0.3665254  2.741039 ## treated_1_2 treated [(1, 2) vs. (0, 2)]  0.3449523 0.2605758  1.323808 ## treated_1_* treated [(1, *) vs. (0, *)]  0.2963301 0.2560696  1.157225 ##                p.value   conf.low conf.high  df ## treated_1_0 0.14884448 -2.4251610 0.3752246  72 ## treated_1_1 0.00693566  0.2799283 1.7293923 138 ## treated_1_2 0.18746696 -0.1696839 0.8595885 159 ## treated_1_* 0.24792906 -0.2072087 0.7998689 369 tidy(out_dr_ml) |>   ggplot(aes(x = term, y = estimate)) +   geom_pointrange(aes(ymin = conf.low, ymax = conf.high)) +   geom_hline(yintercept = 0, linetype = \"dashed\", color = \"red\") +   theme_minimal() out_dr_ml_pc <- cde_did_aipw(base_mediator = therm_trans_t0, on_treated = TRUE,                              trim = c(0.01, 0.99)) |>   set_treatment(treated) |>   treat_model(engine = \"logit\", ps_t_mod) |>   outreg_model(engine = \"lm\", or_t_mod, separate = FALSE) |>   set_treatment(therm_trans_t2) |>   treat_model(engine = \"multinom\", ps_m_mod, separate = FALSE, include_past = FALSE) |>   outreg_model(engine = \"lm\", or_m_mod, separate = FALSE, include_past = FALSE) |>   estimate(nondiscrim_law_diff ~ treated, data = transphobia, n_folds = 5)  summary(out_dr_ml_pc) ##  ##  did_aipw CDE Estimator ## --------------------------- ## Causal variable: treated  ##  ## Treatment model: treated ~ therm_trans_t0  ## Treatment engine: logit  ##  ## Outcome model: ~treated + therm_trans_t0 + gender_norm_moral_t0 + therm_obama_t0 +      vf_democrat + vf_female + vf_black + vf_hispanic  ## Outcome engine: lm  ## --------------------------- ## Causal variable: therm_trans_t2  ##  ## Treatment model: therm_trans_t2 ~ treated + therm_trans_t0 + gender_norm_moral_t0 +      therm_obama_t0 + vf_democrat + vf_female + vf_black + vf_hispanic +      gender_norm_moral_t1 + therm_obama_t1  ## Treatment engine: multinom  ##  ## Outcome model: ~treated + therm_trans_t0 + therm_trans_t2 + gender_norm_moral_t0 +      therm_obama_t0 + vf_democrat + vf_female + vf_black + vf_hispanic +      gender_norm_moral_t1 + therm_obama_t1  ## Outcome engine: lm  ## --------------------------- ## Cross-fit: TRUE  ## Number of folds: 5  ##  ## Estimated Effects: ##                             Estimate Std. Error t value Pr(>|t|) CI Lower ## treated [(1, 0) vs. (0, 0)]  -0.1465     0.5205 -0.2815  0.77912 -1.18413 ## treated [(1, 1) vs. (0, 1)]   0.6810     0.3125  2.1793  0.03101  0.06311 ## treated [(1, 2) vs. (0, 2)]   0.3436     0.1827  1.8810  0.06180 -0.01718 ## treated [(1, *) vs. (0, *)]   0.3724     0.2016  1.8474  0.06549 -0.02399 ##                             CI Upper  DF ## treated [(1, 0) vs. (0, 0)]   0.8911  72 ## treated [(1, 1) vs. (0, 1)]   1.2990 138 ## treated [(1, 2) vs. (0, 2)]   0.7044 159 ## treated [(1, *) vs. (0, *)]   0.7688 369"},{"path":"https://mattblackwell.github.io/DirectEffects/articles/sequential_g.html","id":"estimating-the-demediation-function","dir":"Articles","previous_headings":"","what":"Estimating the demediation function","title":"Sequential g-estimation","text":"assumption sequential unconcoundedness, demediation function can estimated regression outcome variables demediation function (MiM_i) plus intermediate confounders (ZiZ_i), treatment (AiA_i), baseline confounders (XiX_i). regression model correctly specified, coefficients variables demediation function unbiased parameters demediation function. example, interactions mediator treatment, mediator pretreatment confounders, demediation function straightforward estimate. case, demediation function Œ≥(,m,x)=Œ±√óm\\gamma(, m, x) = \\alpha \\times m OLS coefficient mediator estimate Œ±\\alpha.","code":""},{"path":"https://mattblackwell.github.io/DirectEffects/articles/sequential_g.html","id":"using-the-demediation-function-to-estimate-acde","dir":"Articles","previous_headings":"","what":"Using the demediation function to estimate ACDE","title":"Sequential g-estimation","text":"second stage sequential g-estimation uses demediated outcome YÃÉ=Yi‚àíŒ≥ÃÇ(Ai,Mi,Xi;Œ±ÃÇ).\\tilde{Y}_i = Y_i - \\widehat{\\gamma}(A_i, M_i, X_i; \\widehat{\\alpha}). interactions nonlinearities demediation function, becomes YÃÉ=Yi‚àíŒ±ÃÇMi\\tilde{Y}_i = Y_i - \\widehat{\\alpha}M_i. demediated outcome hand, can estimate ACDE regressing outcome treatment pre-treatment covariates: E[YÃÉ|Ai,Xi]=Œ≤0+Œ≤1Ai+XiTŒ≤2.E[\\tilde{Y}_i | A_i, X_i] = \\beta_0 + \\beta_1A_i + X_i^T\\beta_2. assumptions assuming regression correctly specified, Œ≤ÃÇ1\\widehat{\\beta}_1 unbiased estimate ACDE. sequential_g function demonstrate complete estimation demediation function estimation ACDE. technical details sequential g-estimation, see Acharya, Blackwell, Sen (2016).","code":""},{"path":"https://mattblackwell.github.io/DirectEffects/articles/sequential_g.html","id":"illustrative-example-of-sequential-g-estimation","dir":"Articles","previous_headings":"","what":"Illustrative example of sequential g-estimation","title":"Sequential g-estimation","text":"now work one example using sequential_g estimate ACDE. data comes Alesina, Giuliano, Nunn (2013). dataset comes package: paper‚Äôs main argument advent capital-intensive agricultural practice plow favored men women participating agriculture, affected gender inequality modern societies. authors find strong effects plow-based agriculture female labor-force participation, share political positions held women. authors speculate might due (positive) effects plow modern-day income levels, offset direct effects plow. authors control income show significant effect plow appears. evaluate approach try estimate ACDE formally. Thus, case, following variables, ii indexes countries: YiY_i share political positions held women 2000 (women_politics) AiA_i relative proportion ethnic groups traditionally used plow within country (plow) MiM_i log GDP per capita 2000, mean-centered (centered_ln_inc) ZiZ_i post-treatment, pre-mediator intermediate confounders (years_civil_conflict, years_interstate_conflict, oil_pc, european_descent, communist_dummy, polity2_2000, serv_va_gdp2000) XiX_i pre-treatment characteristics country, mostly geographic. (tropical_climate, agricultural_suitability, large_animals, political_hierarchies, economic_complexity, rugged) baseline, first regress YiY_i AiA_i controlling pre-treatment variables XiX_i. Notice effect plow negative insignificant.","code":"data(ploughs) ate.mod <- lm(women_politics ~ plow + agricultural_suitability +                 tropical_climate +  large_animals + political_hierarchies +                 economic_complexity + rugged, data = ploughs) summary(ate.mod) ##  ## Call: ## lm(formula = women_politics ~ plow + agricultural_suitability +  ##     tropical_climate + large_animals + political_hierarchies +  ##     economic_complexity + rugged, data = ploughs) ##  ## Residuals: ##     Min      1Q  Median      3Q     Max  ## -15.060  -5.292  -2.000   3.752  25.923  ##  ## Coefficients: ##                          Estimate Std. Error t value Pr(>|t|)     ## (Intercept)               17.5604     4.9038   3.581 0.000466 *** ## plow                      -2.1032     2.1270  -0.989 0.324422     ## agricultural_suitability   0.9712     2.5761   0.377 0.706721     ## tropical_climate          -7.5137     1.9621  -3.830 0.000191 *** ## large_animals             -8.7104     4.0510  -2.150 0.033201 *   ## political_hierarchies      0.9359     0.9722   0.963 0.337344     ## economic_complexity        1.0284     0.5430   1.894 0.060202 .   ## rugged                    -0.6370     0.4961  -1.284 0.201137     ## --- ## Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1 ##  ## Residual standard error: 8.372 on 145 degrees of freedom ##   (81 observations deleted due to missingness) ## Multiple R-squared:  0.1831, Adjusted R-squared:  0.1436  ## F-statistic: 4.642 on 7 and 145 DF,  p-value: 0.0001028"},{"path":"https://mattblackwell.github.io/DirectEffects/articles/sequential_g.html","id":"implementation","dir":"Articles","previous_headings":"Illustrative example of sequential g-estimation","what":"Implementation","title":"Sequential g-estimation","text":"example, like estimate controlled direct effect plows fixing value mediator, current national income. , must choose value fix mediator. standard sequential g-estimation approach fix value 0, often substantively interesting value‚Äîcertainly income logged income. avoid problem, use mean-centered version logged income, centered_ln_inc, demediate m=0m = 0, equivalent demediation mm set mean logged national income. Furthermore, also use squared term centered mediator, centered_ln_incsq, can include demediation function account nonlinear effects logged income. Next, specify main formula contains left-hand side specifies dependent variable, right-hand side distinguishes baseline variables, intermediate variables, variables demediation function. sets variables left-hand side separated vertical bar |. Thus, formula form yvar ~ treat + xvars | zvars | mvars. . example, specify demediation variables MiM_i Mi2M_i^2: sequential_g(), implements sequential g-estimation way outlined previous section. Specifically, runs first stage model, constructs demediator function, passes second-stage model. simplest, takes formula data frame:","code":"form_main <- women_politics ~ plow + agricultural_suitability + tropical_climate +   large_animals + political_hierarchies + economic_complexity + rugged |   years_civil_conflict + years_interstate_conflict  + oil_pc + european_descent +   communist_dummy + polity2_2000 + serv_va_gdp2000 |   centered_ln_inc + centered_ln_incsq direct <- sequential_g(form_main, data = ploughs)"},{"path":"https://mattblackwell.github.io/DirectEffects/articles/sequential_g.html","id":"output","dir":"Articles","previous_headings":"Illustrative example of sequential g-estimation","what":"Output","title":"Sequential g-estimation","text":"usual, can use summary function output sequential_g function: standard errors based asymptotic variance derived Acharya, Blackwell, Sen (2016), also possible use boots_g function compute standard errors simple bootstrap: coefficient treatment variable (, plow), estimate ACDE. results show negative ACDE plows‚Äîwords, effect plough negative fixed income levels. controlled direct effect larger magnitude estimated total effect:","code":"summary(direct) ##  ## t test of coefficients:  ##  ##                          Estimate Std. Err. t value Pr(>|t|)    ## (Intercept)              12.18450   3.64442  3.3433 0.001121 ** ## plow                     -4.83879   2.34467 -2.0637 0.041312 *  ## agricultural_suitability  4.57388   3.10477  1.4732 0.143458    ## tropical_climate         -2.18919   2.10505 -1.0400 0.300554    ## large_animals            -1.33001   3.40008 -0.3912 0.696401    ## political_hierarchies     0.49575   1.09060  0.4546 0.650283    ## economic_complexity      -0.10521   0.42973 -0.2448 0.807029    ## rugged                   -0.30869   0.47821 -0.6455 0.519888    ## --- ## Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1 out.boots <- boots_g(direct, boots = 250) summary(out.boots) ##  ## Summary of bootstrapped coefficients:  ##  ##                           Estimate Std. Err.   t value     2.5 %  97.5 % ## (Intercept)               12.89400   4.40575   2.92663   5.13182 20.7075 ## plow                      -4.84306   2.71915  -1.78109 -10.48374 -0.1912 ## agricultural_suitability   4.73279   3.33064   1.42098  -0.78854 12.2190 ## tropical_climate          -2.07431   2.27446  -0.91200  -6.21752  2.5859 ## large_animals             -1.05959   4.71610  -0.22467 -11.79015  6.7012 ## political_hierarchies      0.36607   1.19504   0.30633  -2.21079  2.6765 ## economic_complexity       -0.19011   0.53036  -0.35846  -1.16760  0.7744 ## rugged                    -0.35215   0.53592  -0.65709  -1.38329  0.7083"},{"path":"https://mattblackwell.github.io/DirectEffects/articles/sequential_g.html","id":"output-attributes","dir":"Articles","previous_headings":"Illustrative example of sequential g-estimation","what":"Output attributes","title":"Sequential g-estimation","text":"various quantities output objects available sequential_g function. usual, coefficient estimates second stage can accessed using coef() function: One can access confidence intervals coefficients using usual confint function: vcov() function returns variance covariance-matrix accounts first stage estimation,","code":"coef(direct) ##              (Intercept)                     plow agricultural_suitability  ##               12.1845047               -4.8387928                4.5738843  ##         tropical_climate            large_animals    political_hierarchies  ##               -2.1891894               -1.3300131                0.4957518  ##      economic_complexity                   rugged  ##               -0.1052101               -0.3086924 confint(direct, \"plow\") ##          2.5 %     97.5 % ## plow -9.434262 -0.2433234 vcov(direct)[1:3, 1:3] ##                          (Intercept)       plow agricultural_suitability ## (Intercept)               13.2818030 -0.5383896                0.1744604 ## plow                      -0.5383896  5.4974789                1.2047839 ## agricultural_suitability   0.1744604  1.2047839                9.6395922"},{"path":"https://mattblackwell.github.io/DirectEffects/articles/sequential_g.html","id":"sensitivity","dir":"Articles","previous_headings":"Illustrative example of sequential g-estimation","what":"Sensitivity","title":"Sequential g-estimation","text":"cdesens function can perform sensitivity analysis evaluate estimated ACDE changes various levels post-treatment confounding mediator-outcome relationship. Currently, function supports model one mediator.  black line shows estimated ACDE various levels correlation mediator outcome errors, gray bands show 95% confidence intervals. Note correlation 0, recover estimated effect sequential_g. See Acharya, Blackwell, Sen (2016) information.","code":"# update with only one mediator direct1 <- sequential_g(women_politics ~ plow + agricultural_suitability + tropical_climate +   large_animals + political_hierarchies + economic_complexity + rugged |   years_civil_conflict + years_interstate_conflict  + oil_pc + european_descent +   communist_dummy + polity2_2000 + serv_va_gdp2000 |   centered_ln_inc,   ploughs) out_sens <- cdesens(direct1, var = \"plow\") plot(out_sens)"},{"path":[]},{"path":"https://mattblackwell.github.io/DirectEffects/articles/telescope_matching.html","id":"estimation-by-telescope-matching","dir":"Articles","previous_headings":"","what":"Estimation by telescope matching","title":"Telescope matching","text":"Telescope matching provides alternative, less model-dependent approach estimating average controlled direct effect treatment mediator binary. average controlled direct effect interest effect treatment versus control (Ai=1A_i = 1 vs.¬†Ai=0A_i = 0) holding constant mediator 00 (Mi=0M_i = 0). ACDE=E[Yi(1,0)‚àíYi(0,0)] ACDE = E[Y_i(1, 0) - Y_i(0,0)] Identification still depends crucially sequential unconfoundedness assumption Assumption 1, states unobserved confounders AiA_i YiY_i given pre-treatment covariates XiX_i unobserved confounders MiM_i YiY_i given treatment AiA_i, pre-treatment covariates XiX_i post-treatment covariates ZiZ_i. can understand process estimating ACDE imputation problem. estimator ACDE, œÑÃÇ\\hat{\\tau} simply average imputed potential outcomes unit sample. œÑÃÇ=1N‚àë=1N(YÃÇ(1,0)‚àíYÃÇ(0,0)) \\hat{\\tau} = \\frac{1}{N}\\sum_{=1}^N \\left(\\widehat{Y}_i(1,0) - \\widehat{Y}_i(0,0)\\right) obtain imputations YÃÇ(1,0)\\widehat{Y}_i(1,0) YÃÇ(0,0)\\widehat{Y}_i(0,0) unit, telescope matching approach proceeds two stages. first step matches unit Mi=1M_i = 1 user-specified number units Mi=0M_i = 0 share treatment status AiA_i similar pre-treatment covariates XiX_i post-treatment covariates ZiZ_i measured distance metric (telescope_match implement Mahalanobis distance). Let ùí•Lm()\\mathcal{J}_L^m() denote set units matched unit ii. define following imputation unit‚Äôs potential outcome fixing MiM_i 0. YÃÇ(Ai,0)={Yi Mi=01L‚àë‚Ñì‚ààùí•Lm()Y‚Ñì Mi=1 \\widehat{Y}_i(A_i, 0) =\\begin{cases} Y_i & \\text{ } M_i = 0 \\\\ \\frac{1}{L} \\sum_{\\ell\\\\mathcal{J}^m_L()} Y_{\\ell} & \\text{ } M_i = 1\\end{cases} second step, match unit number units opposite treatment status similar values pre-treatment covariates XiX_i Let ùí•La()\\mathcal{J}_L^() denote set units matched unit ii Aj=1‚àíAiA_j = 1 - A_i j‚ààùí•La()j \\\\mathcal{J}_L^(). use first-stage imputations either unit ii second-stage matches impute potential outcomes unit treatment control fixing mediator 00. YÃÇ(,0)={YÃÇ(Ai,0)ifAi=a1L‚àëj‚ààùí•La()YÃÇj(Aj,0)ifAi=1‚àí  \\widehat{Y}_{}(,0) = \\begin{cases}     \\widehat{Y}_{}(A_i,0) & \\text{}\\ A_i = \\\\     \\frac{1}{L} \\sum_{j\\\\mathcal{J}^a_L()} \\widehat{Y}_{j}(A_j,0) & \\text{}\\  A_i = 1-\\end{cases} Since matching done replacement, units may used multiple times. define KLm()=‚àëk=1NùïÄ{‚ààùí•Lm(k)}K^m_L() = \\sum_{k=1}^N \\mathbb{}\\{\\\\mathcal{J}^m_L(k)\\} number times unit ii used match stage KLa()=‚àëj=1NùïÄ{‚ààùí•La(j)}K^a_L() = \\sum_{j=1}^N \\mathbb{}\\{\\\\mathcal{J}^a_L(j)\\}. Moreover, since units Mi=0M_i = 0 contribute indirectly second stage matches define KLam()=‚àëj=1NùïÄ{‚ààùí•Lm(j)}KLa(j)K^{}_L() = \\sum_{j=1}^N \\mathbb{}\\{\\\\mathcal{J}^m_L(j)\\}K^a_L(j) denote number times unit Mi=0M_i = 0 matched unit Mi=1M_i = 1 implicitly used match second stage. allows us re-write simple matching estimator weighted average œÑÃÇ=N‚àí1‚àë=1N(2Ai‚àí1)(1‚àíMi)WiYi\\widehat{\\tau} = N^{-1} \\sum_{=1}^N (2A_i - 1)(1 - M_i)W_iY_i weight defined Wi=1+KLa()L+KLm()L+KLam()L2   W_i =  1 + \\frac{K^a_L()}{L} + \\frac{K^m_L()}{L} + \\frac{K^{}_L()}{L^2} weights can used diagnostic assessing variance estimator whether particular observations extreme influence estimate large weights, resulting large variances. telescope_match function returns constituent matching counts along combined matching ‚Äúweight‚Äù observation use diagnostic plots.","code":""},{"path":"https://mattblackwell.github.io/DirectEffects/articles/telescope_matching.html","id":"bias-correction-for-matching","dir":"Articles","previous_headings":"Estimation by telescope matching","what":"Bias correction for matching","title":"Telescope matching","text":"Matching estimators fixed number matches exhibit bias even large samples due differences regression function units matches evaluated respective covariate values Abadie Imbens (2011). bias converges probability 00 sample size grows, rate convergence slow enough bias terms dominate distribution address , matching estimators treatment effects typically incorporate bias correction adjusts matched values estimated difference regression functions. incorporate similar approach correcting matching bias two-stage procedure. bias simple matching estimator œÑÃÇ\\hat{\\tau} consists two terms, bias due matching mediator (BLmB_L^m) bias due matching treatment (BLaB_L^) BLm=1N‚àë=1N(2Ai‚àí1)Mi(1+KLa()L)(1L‚àë‚Ñì‚ààJLm()ŒºAi0(X‚Ñì,Z‚Ñì,Ai)‚àíŒºAi0(Xi,Zi,Ai))  B^m_L = \\frac{1}{N} \\sum_{=1}^N (2A_i - 1)M_i \\left(1 + \\frac{K^a_L()}{L}\\right)  \\left( \\frac{1}{L} \\sum_{{\\ell} \\J^m_L()} \\mu_{A_i0}(X_{\\ell}, Z_{\\ell}, A_i) - \\mu_{A_i0}(X_i, Z_i, A_i) \\right) BLa=1N‚àë=1N(2Ai‚àí1)[1L‚àëj‚ààJLa()Œº1‚àíAi,0(Xi,1‚àíAi)‚àíŒº1‚àíAi,0(Xj,1‚àíAi)]   B^a_L = \\frac{1}{N} \\sum_{=1}^N (2A_i - 1) \\Bigg[\\frac{1}{L} \\sum_{j \\J^a_L()} \\mu_{1-A_i,0}(X_i,1-A_i) - \\mu_{1-A_i,0}(X_j,1-A_i)   \\Bigg] Œºam(x,z,)=E[Y(,m)‚à£Xi=x,Zi=z,Ai=]\\mu_{}(x,z,) = E[Y(,m) \\mid X_i = x, Z_i = z, A_i = ] Œºam(x,)=E[Yi(,m)‚à£Xi=x,Ai=]\\mu_{}(x,) = E[Y_i(,m) \\mid X_i= x, A_i = ] denote conditional expectations potential outcomes given two different conditioning sets (without ZZ). sequential ignorability, Œºam(x,z,)=Œº(x,z,,m)=E[Yi‚à£Xi=x,Zi=z,Ai=,Mi=m]\\mu_{}(x,z,) = \\mu(x,z,,m) = E[Y_i \\mid X_i= x, Z_i = z, A_i = , M_i = m]. method implemented telescope_match extends bias correction strategy Abadie Imbens (2011) two-stage setting. estimates two conditional expectation functions using regression estimators ŒºÃÇ(x,z,,m)\\widehat{\\mu}(x, z, , m) ŒºÃÇa0(x,)\\widehat{\\mu}_{a0}(x, ). shown Blackwell Strezhnev (2021), regression estimators consistent true regression functions, estimated bias correction converges true bias. rate convergence fast enough bias can ignored asymptotically.","code":""},{"path":"https://mattblackwell.github.io/DirectEffects/articles/telescope_matching.html","id":"inference","dir":"Articles","previous_headings":"Estimation by telescope matching","what":"Inference","title":"Telescope matching","text":"Obtaining valid standard errors matching context difficult matching replacement induces dependencies imputed potential outcomes. provide two approaches estimating standard errors. first implements version Otsu Rai (2017) wild bootstrap matching estimators, extended two-stage setting. second (default) approach estimates components asymptotic variance derived Blackwell Strezhnev (2021).","code":""},{"path":"https://mattblackwell.github.io/DirectEffects/articles/telescope_matching.html","id":"empirical-illustration-of-telescope-matching","dir":"Articles","previous_headings":"","what":"Empirical illustration of telescope matching","title":"Telescope matching","text":"section, illustrate implementation telescope matching estimator applied Job Corps experiment data used Huber (2014) estimate effect randomized job training program self-assessed health holding constant intermediate outcome employment. data supplied along package. YiY_i indicator whether participants reported ‚Äúgood‚Äù health 2.5 years randomization (exhealth30) AiA_i indicator assignment job training program (treat) MiM_i indicator employment 1 1.5 years assignment (work2year2q) ZiZ_i post-treatment, pre-mediator intermediate confounders (emplq4, emplq4full) XiX_i pre-treatment characteristics (chobef, trainyrbef, jobeverbef) original Huber (2014) paper looks separate controlled effects female male participants. start subsetting dataset female participants define two formula objects used matching, first including pre- post-treatment covariates XiX_i ZiZ_i along treatment-covariate interactions. second includes pre-treatment covariates treatment-covariate interactions. , include subset covariates used Huber (2014) analysis. telescope_match() function can handle additional mediators intermediate covariates simply adding end formula manner two groups. pass formula function : summary() function print output (estimate standard errors) console possible controlled direct effects. function also provides summaries matching output. elements output can accessed directly returned tmatch object. Additional diagnostics can conducted calling balance.tmatch() function returned tmatch object assess change pre-/post-matching covariate balance first second stages. Calling plotDiag.tmatch() function return histogram number times unit used match (K/LK/L) either first (mediator) stage second (treatment) stage.","code":"data(jobcorps) jobcorps_female <- subset(jobcorps, female == 1) ## Telescope matching formula - First stage (X and Z) tm_form <- exhealth30 ~ schobef + trainyrbef + jobeverbef  | treat |   emplq4 + emplq4full | work2year2q ### Estimate ACDE for women holding employment at 0 tm_out <-  telescope_match(tm_form, data = jobcorps_female, L = 3) ## Beginning matching... ## Matching work2year2q... ## Matching treat... ## Beginning bias correction... # Prints the summary output summary(tm_out) ## Telescope matching results ## ---------------------------- ##  ## Call: ## telescope_match(formula = tm_form, data = jobcorps_female, L = 3) ##  ## Active treatment:  treat  ## Controlled treatment(s): work2year2q  ##  ## Matching summary: ##          Term Matching Ratio L:1 N == 1 N == 0 Matched == 1 Matched == 0 ## 1       treat                  3   2801   1551         2273         1546 ## 2 work2year2q                  3   2559   1793         1355         1497 ##  ##  ## Summary of units matching contributions: ##                   Min.   1st Qu.    Median Mean  3rd Qu.      Max. ## treat                0 0.3333333 0.6666667    1 1.333333   5.00000 ## treat:work2year2q    0 0.0000000 0.3333333    1 1.000000 116.88889 ## work2year2q          0 0.0000000 0.3333333    1 1.333333  72.66667 ##  ##  ## Estimated controlled direct effects of treat: ##                   work2year2q Estimate Estimate (no BC) Std. Err. ## (1, 0) vs. (0, 0)           0 -0.08482         -0.07573   0.05231 ## (1, 1) vs. (0, 1)           1  0.02369          0.02367   0.02285 # The coefficients + SE can be accessed directly as well tm_out$tau # Point estimate ## [1] -0.08481891  0.02368883 tm_out$tau_se #Standard error ## [1] 0.05231118 0.02284633 ## Assess mediator balance on selected pre- and post- treatment covariates balance.tmatch(tm_out, vars = work2year2q ~ schobef + emplq4,                data = jobcorps_female) ##         variable  before_0  before_1   after_0   after_1 before_sd  before_diff ## schobef  schobef 0.6352482 0.6287612 0.7033548 0.6314338 0.4824714 -0.006486953 ## emplq4    emplq4 0.1996654 0.7198124 0.4771752 0.5057445 0.5000270  0.520147061 ##         before_std_diff  after_diff after_std_diff ## schobef     -0.01344526 -0.07192096    -0.14906782 ## emplq4       1.04023787  0.02856924     0.05713539 ## Assess treatment balance on selected pre-treatment covariates balance.tmatch(tm_out, vars = treat ~ trainyrbef + hhsize,                data = jobcorps_female) ##              variable   before_0   before_1    after_0    after_1 before_sd ## trainyrbef trainyrbef 0.01676338 0.01713674 0.01700368 0.01700368 0.1292996 ## hhsize         hhsize 4.54094133 4.53802213 4.55935968 4.53592218 2.2087850 ##              before_diff before_std_diff after_diff after_std_diff ## trainyrbef  0.0003733584     0.002887544  0.0000000     0.00000000 ## hhsize     -0.0029191932    -0.001321629 -0.0234375    -0.01061104 # Number of times each unit is used as a match in the mediator (first) stage plotDiag.tmatch(tm_out, stage = \"work2year2q\") # Number of times each unit is used as a match in the treatment (second) stage plotDiag.tmatch(tm_out, stage = \"treat\")"},{"path":[]},{"path":"https://mattblackwell.github.io/DirectEffects/authors.html","id":null,"dir":"","previous_headings":"","what":"Authors","title":"Authors and Citation","text":"Matthew Blackwell. Author, maintainer. Avidit Acharya. Author. Maya Sen. Author. Shiro Kuriwaki. Author. Jacob Brown. Author. Anton Strezhnev. Author.","code":""},{"path":"https://mattblackwell.github.io/DirectEffects/authors.html","id":"citation","dir":"","previous_headings":"","what":"Citation","title":"Authors and Citation","text":"Blackwell M, Acharya , Sen M, Kuriwaki S, Brown J, Strezhnev (2024). DirectEffects: Estimating Controlled Direct Effects Explaining Causal Findings. R package version 0.2.9000, https://mattblackwell.github.io/DirectEffects/.","code":"@Manual{,   title = {DirectEffects: Estimating Controlled Direct Effects for Explaining Causal Findings},   author = {Matthew Blackwell and Avidit Acharya and Maya Sen and Shiro Kuriwaki and Jacob Brown and Anton Strezhnev},   year = {2024},   note = {R package version 0.2.9000},   url = {https://mattblackwell.github.io/DirectEffects/}, }"},{"path":[]},{"path":"https://mattblackwell.github.io/DirectEffects/index.html","id":"overview","dir":"","previous_headings":"","what":"Overview","title":"Estimating Controlled Direct Effects for Explaining Causal Findings","text":"DirectEffects R package estimate controlled direct effects (CDEs), effect treatment fixing set downstream mediators particular values. now, package supports sequential g-estimation two-stage matching approach called telescope matching. information CDEs can useful applied research brief introduction sequential g-estimation, see Acharya, Blackwell, Sen (2016). telescope matching procedure, see Blackwell Strezhnev (2022).","code":""},{"path":"https://mattblackwell.github.io/DirectEffects/index.html","id":"installation","dir":"","previous_headings":"","what":"Installation","title":"Estimating Controlled Direct Effects for Explaining Causal Findings","text":"can install DirectEffects via CRAN current stable version via GitHub development version.","code":"# Installing from CRAN install.packages(\"DirectEffects\")  # Installing development version from Github: # install.packages(\"devtools\") devtools::install_github(\"mattblackwell/DirectEffects\", build_vignettes = TRUE)"},{"path":"https://mattblackwell.github.io/DirectEffects/index.html","id":"usage","dir":"","previous_headings":"","what":"Usage","title":"Estimating Controlled Direct Effects for Explaining Causal Findings","text":"main functions estimating CDEs DirectEffects : sequential_g(): estimate controlled direct effects using two-stage linear models. telescope_match(): estimated controlled direct effects using two-stage matching procedure bias correction. DirectEffects also provides diagnostics two approaches, including sensitivity analyses balance checks.","code":""},{"path":"https://mattblackwell.github.io/DirectEffects/reference/balance.tmatch.html","id":null,"dir":"Reference","previous_headings":"","what":"Balance diagnostics for Telescope Match objects ‚Äî balance.tmatch","title":"Balance diagnostics for Telescope Match objects ‚Äî balance.tmatch","text":"Balance diagnostics Telescope Match objects","code":""},{"path":"https://mattblackwell.github.io/DirectEffects/reference/balance.tmatch.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Balance diagnostics for Telescope Match objects ‚Äî balance.tmatch","text":"","code":"balance.tmatch(object, vars, data, comparison = NULL)"},{"path":"https://mattblackwell.github.io/DirectEffects/reference/balance.tmatch.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Balance diagnostics for Telescope Match objects ‚Äî balance.tmatch","text":"object object class tmatch ‚Äì results call telescope_match vars formula object containing either treatment mediator dependent variable (denotes whether first-stage second-stage balance diagnostics returned) covariates balance diagnostics requested independent variables. covariate function covariates (e.g. higher-order polynomials interactions) separated +. data data frame used call telescope_match comparison binary indicator function return balance treated group (`1`), control group (`0`), overall combined balanced (`NULL`, default).","code":""},{"path":"https://mattblackwell.github.io/DirectEffects/reference/balance.tmatch.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Balance diagnostics for Telescope Match objects ‚Äî balance.tmatch","text":"Returns data frame following columns. variable: Name covariate before_0: Pre-matching average covariate mediator == 0 (first stage balance) treatment == 0 (second stage balance) condition before_1: Pre-matching average covariate mediator == 1 (first stage balance) treatment == 1 (second stage balance) condition after_0: Post-matching average covariate mediator == 0 (first stage balance) treatment == 0 (second stage balance) condition after_1: Post-matching average covariate mediator == 1 (first stage balance) treatment == 1 (second stage balance) condition before_sd: standard deviation outcome (pre-Matching) before_diff: Pre-matching covariate difference mediator arms (first stage balance) treatment arms (second stage balance). before_std_diff: Pre-matching standardized covariate difference mediator arms (first stage balance) treatment arms (second stage balance), Equal Before_Diff/SD. after_diff: Post‚Äìmatching covariate difference mediator arms (first stage balance) treatment arms (second stage balance). after_std_diff: Post-matching standardized covariate difference mediator arms (first stage balance) treatment arms (second stage balance), Equal Before_Diff/SD.","code":""},{"path":"https://mattblackwell.github.io/DirectEffects/reference/balance.tmatch.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Balance diagnostics for Telescope Match objects ‚Äî balance.tmatch","text":"Provides matching balance diagnostics tmatch objects returned telescope_match","code":""},{"path":"https://mattblackwell.github.io/DirectEffects/reference/balance_table.html","id":null,"dir":"Reference","previous_headings":"","what":"Balance diagnostics telescope matching ‚Äî balance_table","title":"Balance diagnostics telescope matching ‚Äî balance_table","text":"Provides matching balance diagnostics telescope matching CDE estimators","code":""},{"path":"https://mattblackwell.github.io/DirectEffects/reference/balance_table.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Balance diagnostics telescope matching ‚Äî balance_table","text":"","code":"balance_table(object, vars, data, comparison = NULL)"},{"path":"https://mattblackwell.github.io/DirectEffects/reference/balance_table.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Balance diagnostics telescope matching ‚Äî balance_table","text":"object output estimated cde_telescope_match estimator vars formula object containing either treatment mediator dependent variable (denotes whether first-stage second-stage balance diagnostics returned) covariates balance diagnostics requested independent variables. covariate function covariates (e.g. higher-order polynomials interactions) separated +. data data frame used call estimate cde_telescope_match object. comparison binary indicator function return balance treated group (`1`), control group (`0`), overall combined balanced (`NULL`, default).","code":""},{"path":"https://mattblackwell.github.io/DirectEffects/reference/balance_table.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Balance diagnostics telescope matching ‚Äî balance_table","text":"Returns data frame following columns. variable: Name covariate before_0: Pre-matching average covariate mediator == 0 (first stage balance) treatment == 0 (second stage balance) condition before_1: Pre-matching average covariate mediator == 1 (first stage balance) treatment == 1 (second stage balance) condition after_0: Post-matching average covariate mediator == 0 (first stage balance) treatment == 0 (second stage balance) condition after_1: Post-matching average covariate mediator == 1 (first stage balance) treatment == 1 (second stage balance) condition before_sd: standard deviation outcome (pre-Matching) before_diff: Pre-matching covariate difference mediator arms (first stage balance) treatment arms (second stage balance). before_std_diff: Pre-matching standardized covariate difference mediator arms (first stage balance) treatment arms (second stage balance), Equal Before_Diff/SD. after_diff: Post‚Äìmatching covariate difference mediator arms (first stage balance) treatment arms (second stage balance). after_std_diff: Post-matching standardized covariate difference mediator arms (first stage balance) treatment arms (second stage balance), Equal Before_Diff/SD.","code":""},{"path":"https://mattblackwell.github.io/DirectEffects/reference/boots_g.html","id":null,"dir":"Reference","previous_headings":"","what":"Coefficient Estimates across Bootstrapped Samples ‚Äî boots_g","title":"Coefficient Estimates across Bootstrapped Samples ‚Äî boots_g","text":"Performs simple bootstrap fitted DirectEffects model re-estimating model bootstrap samples.","code":""},{"path":"https://mattblackwell.github.io/DirectEffects/reference/boots_g.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Coefficient Estimates across Bootstrapped Samples ‚Äî boots_g","text":"","code":"boots_g(seqg, boots = 1000)"},{"path":"https://mattblackwell.github.io/DirectEffects/reference/boots_g.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Coefficient Estimates across Bootstrapped Samples ‚Äî boots_g","text":"seqg fitted sequential_g estimate, computed sequential_g. boots number bootstrap replicates. Defaults 1000.","code":""},{"path":"https://mattblackwell.github.io/DirectEffects/reference/boots_g.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Coefficient Estimates across Bootstrapped Samples ‚Äî boots_g","text":"object type seqgboots matrix boots rows columns coefficient seqg model. Use summary provide summary statistics, mean quantiles.","code":""},{"path":"https://mattblackwell.github.io/DirectEffects/reference/boots_g.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Coefficient Estimates across Bootstrapped Samples ‚Äî boots_g","text":"","code":"data(ploughs) s1 <- sequential_g(women_politics ~ plow +  agricultural_suitability + tropical_climate + large_animals + rugged |  years_civil_conflict + years_interstate_conflict  + oil_pc +  european_descent + communist_dummy + polity2_2000 |  centered_ln_inc + centered_ln_incsq, ploughs)  out.boots <- boots_g(s1, boots = 100)  summary(out.boots) #>  #> Summary of bootstrapped coefficients:  #>  #>                          Estimate Std. Err.  t value    2.5 %  97.5 % #> (Intercept)              14.02959   4.70395  2.98251  5.02279 23.1829 #> plow                     -4.04895   1.88171 -2.15174 -7.64853 -0.6127 #> agricultural_suitability  4.32654   2.23892  1.93243 -0.28430  8.7664 #> tropical_climate         -2.87187   2.50310 -1.14732 -8.73663  1.3647 #> large_animals            -1.88143   4.26803 -0.44082 -9.83607  7.0296 #> rugged                   -0.33396   0.48342 -0.69083 -1.19738  0.6599 #>"},{"path":"https://mattblackwell.github.io/DirectEffects/reference/boots_tm.html","id":null,"dir":"Reference","previous_headings":"","what":"Bootstrap Uncertainty Estimates for Telescope Matching ‚Äî boots_tm","title":"Bootstrap Uncertainty Estimates for Telescope Matching ‚Äî boots_tm","text":"Performs weighted bootstrap procedure output telescope_match.","code":""},{"path":"https://mattblackwell.github.io/DirectEffects/reference/boots_tm.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Bootstrap Uncertainty Estimates for Telescope Matching ‚Äî boots_tm","text":"","code":"boots_tm(obj, boots = 1000, ci_alpha = 0.05)"},{"path":"https://mattblackwell.github.io/DirectEffects/reference/boots_tm.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Bootstrap Uncertainty Estimates for Telescope Matching ‚Äî boots_tm","text":"obj tmatch object, computed telescope_match. boots number bootstrap replicates. Defaults 1000. ci_alpha alpha value bootstrapped confidence intervals. Corresponds 100 * (1-alpha) confidence interval.","code":""},{"path":"https://mattblackwell.github.io/DirectEffects/reference/boots_tm.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Bootstrap Uncertainty Estimates for Telescope Matching ‚Äî boots_tm","text":"data.frame columns `ci_low` `ci_high` contain bootstrapped confidence intervals estimated ACDEs obj$tau.","code":""},{"path":"https://mattblackwell.github.io/DirectEffects/reference/boots_tm.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Bootstrap Uncertainty Estimates for Telescope Matching ‚Äî boots_tm","text":"","code":"# \\donttest{ data(jobcorps)  ## Split male/female jobcorps_female <- subset(jobcorps, female == 1)  ## Telescope matching formula - First stage (X and Z) tm_form <- exhealth30 ~  schobef + trainyrbef + jobeverbef  | treat | emplq4 + emplq4full | work2year2q   ### Estimate ACDE for women holding employment at 0 tm_out <-  telescope_match(   tm_form,   data = jobcorps_female,   L = 3,   boot = FALSE,   verbose = TRUE ) #> Beginning matching... #> Matching work2year2q... #> Matching treat... #> Beginning bias correction...  out.boots <- boots_tm(tm_out)  out.boots #>         ci_low    ci_high #> 1 -0.206300499 0.01136792 #> 2 -0.009830319 0.07452051 # }"},{"path":"https://mattblackwell.github.io/DirectEffects/reference/cde_aipw.html","id":null,"dir":"Reference","previous_headings":"","what":"Initialize an AIPW CDE estimator ‚Äî cde_aipw","title":"Initialize an AIPW CDE estimator ‚Äî cde_aipw","text":"Initializes specification CDE estimator based augmented inverse probability weighting approach.","code":""},{"path":"https://mattblackwell.github.io/DirectEffects/reference/cde_aipw.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Initialize an AIPW CDE estimator ‚Äî cde_aipw","text":"","code":"cde_aipw(trim = c(0.01, 0.99), aipw_blip = TRUE)"},{"path":"https://mattblackwell.github.io/DirectEffects/reference/cde_aipw.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Initialize an AIPW CDE estimator ‚Äî cde_aipw","text":"trim vector length 2 indicating quantiles propensity scores trimmed. default c(0.01, 0.99) meaning top bottom 1% propensity scores trunctated quantiles. NULL, trimming occurs. aipw_blip TRUE (default), augmented inverse probability weighting estimators used estimate intermediate outcome regressions (blip functions).","code":""},{"path":"https://mattblackwell.github.io/DirectEffects/reference/cde_did_aipw.html","id":null,"dir":"Reference","previous_headings":"","what":"Initialize an AIPW DID-CDE estimator ‚Äî cde_did_aipw","title":"Initialize an AIPW DID-CDE estimator ‚Äî cde_did_aipw","text":"Initializes specification difference--differences estimator CDE based augmented inverse probability weighting.","code":""},{"path":"https://mattblackwell.github.io/DirectEffects/reference/cde_did_aipw.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Initialize an AIPW DID-CDE estimator ‚Äî cde_did_aipw","text":"","code":"cde_did_aipw(   base_mediator,   trim = c(0.01, 0.99),   aipw_blip = TRUE,   on_treated = FALSE )"},{"path":"https://mattblackwell.github.io/DirectEffects/reference/cde_did_aipw.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Initialize an AIPW DID-CDE estimator ‚Äî cde_did_aipw","text":"base_mediator (unquoted) name variable measures mediator baseline. trim vector length 2 indicating quantiles propensity scores trimmed. default c(0.01, 0.99) meaning top bottom 1% propensity scores trunctated quantiles. NULL, trimming occurs. aipw_blip TRUE (default), augmented inverse probability weighting estimators used estimate intermediate outcome regressions (blip functions). on_treated FALSE (defafult), effects average effects conditional levels baseline mediator. TRUE, effects conditional treated path. difference identficiation, see Details .","code":""},{"path":"https://mattblackwell.github.io/DirectEffects/reference/cde_did_aipw.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Initialize an AIPW DID-CDE estimator ‚Äî cde_did_aipw","text":"function, unlike CDE estimators package, returns estimated effects first treatment variable. effects conditional baseline value mediator (base_mediator) on_treated TRUE. marginalized CDE estimand also estimated. on_treated FALSE, estimates conditional entire \"treated\" history. Identification  requirements slightly different two cases. on_treated FALSE, confounders mediator affected treatment. See Blackwell et al (2022) information.","code":""},{"path":"https://mattblackwell.github.io/DirectEffects/reference/cde_ipw.html","id":null,"dir":"Reference","previous_headings":"","what":"Initialize an IPW CDE estimator ‚Äî cde_ipw","title":"Initialize an IPW CDE estimator ‚Äî cde_ipw","text":"Initializes specification CDE estimator based inverse probability weighting approach.","code":""},{"path":"https://mattblackwell.github.io/DirectEffects/reference/cde_ipw.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Initialize an IPW CDE estimator ‚Äî cde_ipw","text":"","code":"cde_ipw(hajek = TRUE, trim = c(0.01, 0.99))"},{"path":"https://mattblackwell.github.io/DirectEffects/reference/cde_ipw.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Initialize an IPW CDE estimator ‚Äî cde_ipw","text":"hajek TRUE, normalized weights used Hajek estimator. FALSE, traditional IPW weights used. trim vector length 2 indicating quantiles propensity scores trimmed. default c(0.01, 0.99) meaning top bottom 1% propensity scores trunctated quantiles. NULL, trimming occurs.","code":""},{"path":"https://mattblackwell.github.io/DirectEffects/reference/cde_reg_impute.html","id":null,"dir":"Reference","previous_headings":"","what":"Initialize an regression imputation CDE estimator ‚Äî cde_reg_impute","title":"Initialize an regression imputation CDE estimator ‚Äî cde_reg_impute","text":"Initializes specification CDE estimator based regression imputation approach","code":""},{"path":"https://mattblackwell.github.io/DirectEffects/reference/cde_reg_impute.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Initialize an regression imputation CDE estimator ‚Äî cde_reg_impute","text":"","code":"cde_reg_impute(...)"},{"path":"https://mattblackwell.github.io/DirectEffects/reference/cde_reg_impute.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Initialize an regression imputation CDE estimator ‚Äî cde_reg_impute","text":"... Optional arguments pass regression imputation estimator.","code":""},{"path":"https://mattblackwell.github.io/DirectEffects/reference/cde_telescope_match.html","id":null,"dir":"Reference","previous_headings":"","what":"Initialize an telescope matching CDE estimator ‚Äî cde_telescope_match","title":"Initialize an telescope matching CDE estimator ‚Äî cde_telescope_match","text":"Initializes specification CDE estimator based telescope matching approach","code":""},{"path":"https://mattblackwell.github.io/DirectEffects/reference/cde_telescope_match.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Initialize an telescope matching CDE estimator ‚Äî cde_telescope_match","text":"","code":"cde_telescope_match(...)"},{"path":"https://mattblackwell.github.io/DirectEffects/reference/cde_telescope_match.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Initialize an telescope matching CDE estimator ‚Äî cde_telescope_match","text":"... Optional arguments pass telescope matching estimator.","code":""},{"path":"https://mattblackwell.github.io/DirectEffects/reference/cdesens.html","id":null,"dir":"Reference","previous_headings":"","what":"Estimate sensitivity of ACDE estimates under varying levels of unobserved confounding ‚Äî cdesens","title":"Estimate sensitivity of ACDE estimates under varying levels of unobserved confounding ‚Äî cdesens","text":"Estimate Average Controlled Direct Effect varies various levels unobserved confounding. value unmeasured confounding, summarized correlation residuals, cdesens computes ACDE. Standard errors computed simple bootstrap.","code":""},{"path":"https://mattblackwell.github.io/DirectEffects/reference/cdesens.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Estimate sensitivity of ACDE estimates under varying levels of unobserved confounding ‚Äî cdesens","text":"","code":"cdesens(   seqg,   var,   rho = seq(-0.9, 0.9, by = 0.05),   bootstrap = c(\"none\", \"standard\"),   boots_n = 1000,   verbose = FALSE,   ... )"},{"path":"https://mattblackwell.github.io/DirectEffects/reference/cdesens.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Estimate sensitivity of ACDE estimates under varying levels of unobserved confounding ‚Äî cdesens","text":"seqg Output sequential_g. function supports specifications one mediator variable. var character indicating name variable estimated ACDE evaluated. rho numerical vector correlations errors test . original model assumes rho = 0 bootstrap character c(\"none\", \"standard\"), indicating whether include bootstrap standard errors. Default \"none\". boots_n Number bootstrap replicates, defaults 100. verbose Whether show progress messages, defaults FALSE ... parameters pass lm.fit() refitting model","code":""},{"path":"https://mattblackwell.github.io/DirectEffects/reference/cdesens.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Estimate sensitivity of ACDE estimates under varying levels of unobserved confounding ‚Äî cdesens","text":"","code":"data(civilwar)   # main formula: Y ~ A + X | Z | M form_main <- onset ~ ethfrac + lmtnest + ncontig + Oil | warl +   gdpenl + lpop + polity2l + relfrac | instab  # estimate CDE direct <- sequential_g(form_main, data = civilwar)  # sensitivity out_sens <- cdesens(direct, var = \"ethfrac\")  # plot sensitivity plot(out_sens)"},{"path":"https://mattblackwell.github.io/DirectEffects/reference/civilwar.html","id":null,"dir":"Reference","previous_headings":"","what":"Data on civil wars and internal conflict from 1945-1999. ‚Äî civilwar","title":"Data on civil wars and internal conflict from 1945-1999. ‚Äî civilwar","text":"dataset replicate analysis Fearon Laitin (2003). dataset replicate analysis Fearon Laitin (2003).","code":""},{"path":"https://mattblackwell.github.io/DirectEffects/reference/civilwar.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Data on civil wars and internal conflict from 1945-1999. ‚Äî civilwar","text":"","code":"data(civilwar)  data(civilwar)"},{"path":"https://mattblackwell.github.io/DirectEffects/reference/civilwar.html","id":"format","dir":"Reference","previous_headings":"","what":"Format","title":"Data on civil wars and internal conflict from 1945-1999. ‚Äî civilwar","text":"data frame 6610 observations 69 variables. data frame 6610 observations 69 variables.","code":""},{"path":"https://mattblackwell.github.io/DirectEffects/reference/civilwar.html","id":"source","dir":"Reference","previous_headings":"","what":"Source","title":"Data on civil wars and internal conflict from 1945-1999. ‚Äî civilwar","text":"doi:10.1017/S0003055403000534 doi:10.1017/S0003055403000534","code":""},{"path":"https://mattblackwell.github.io/DirectEffects/reference/civilwar.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Data on civil wars and internal conflict from 1945-1999. ‚Äî civilwar","text":"ccode. COW country id number country. country name cname. abbreviated country name cmark. 1 first country series year. start year war/conflict wars. number wars progress country year war. 1 war ongoing country year warl. lagged war, w/ 0 start country series onset. 1 civil war onset ethonset. 1 onset = 1 & ethwar ~= 0 durest. estimated war duration aim. 1 = rebels aim center, 3 = aim exit autonomy, 2 = mixed ambig. casename. Id case, usually name rebel group(s) ended. war ends = 1, 0 = ongoing ethwar. 0 = ethnic, 1 = ambig/mixed, 2 = ethnic waryrs. war years onset pop. population, 1000s lpop. log pop polity2. revised polity score gdpen. gdp/pop based pwt5.6, wdi2001,cow energy data gdptype. source/type gdp/pop estimate gdpenl. lagged gdpenl, except first country series lgdpenl1. log lagged gdpen lpopl1. log population, lagged except first country series region. country's region, based MAR project western. Dummy Western Democracies & Japan eeurop. Dummy Eastern Europe lamerica. Dummy Latin America ssafrica. Dummy Sub-Saharan Africa asia. Dummy Asia (including Japan) nafrme. Dummy North Africa/Middle East colbrit. Former British colony colfra. former French colony mtnest. Estimated percent mountainous terrain lmtnest. log mtnest elevdiff. high - low elevation, meters Oil. 1/3 export revenues fuels ncontig. noncontiguous state ethfrac. ethnic frac. based Soviet Atlas, plus estimates missing 1964 ef. ethnic fractionalization based Fearon 2002 APSA paper plural. share largest ethnic group (Fearon 2002 APSA) second. share 2nd largest ethnic group (Fearon 2002 APSA) numlang. number languages Ethnologue > min(1 relfrac. religious fractionalization plurrel. size largest confession minrelpc. size second largest confession muslim. percent muslim nwstate. 1 1st 2 years state's existence polity2l. lagged polity2, except 1st country series instab. > 2 change Polity measure last 3 yrs anocl. lagged anocracy (-6 < polity2l < 6) deml. lagged democracy (polity2l > 5) empethfrac. ethfrac coded colonial empires empwarl. warl coded data empires emponset. onset coded data empires empgdpenl. gdpenl coded empires data emplpopl. lpopl coded empires data emplmtnest. lmtnest coded empires data empncontig. ncontig coded empires empolity2l. polity2l adjusted empires (see fn38 paper) sdwars. number Sambanis/Doyle civ wars progress sdonset. onset Sambanis/Doyle war colwars. number Collier/Hoeffler wars progress colonset. onset Collier/Hoeffler war cowwars. number COW civ wars progress cowonset. onset COW civ war cowwarl. 1 COW war ongoing last period sdwarl. 1 S/D war ongoing last period colwarl. 1 C/H war ongoing last period ccode. COW country id number country. country name cname. abbreviated country name cmark. 1 first country series year. start year war/conflict wars. number wars progress country year war. 1 war ongoing country year warl. lagged war, w/ 0 start country series onset. 1 civil war onset ethonset. 1 onset = 1 & ethwar ~= 0 durest. estimated war duration aim. 1 = rebels aim center, 3 = aim exit autonomy, 2 = mixed ambig. casename. Id case, usually name rebel group(s) ended. war ends = 1, 0 = ongoing ethwar. 0 = ethnic, 1 = ambig/mixed, 2 = ethnic waryrs. war years onset pop. population, 1000s lpop. log pop polity2. revised polity score gdpen. gdp/pop based pwt5.6, wdi2001,cow energy data gdptype. source/type gdp/pop estimate gdpenl. lagged gdpenl, except first country series lgdpenl1. log lagged gdpen lpopl1. log population, lagged except first country series region. country's region, based MAR project western. Dummy Western Democracies & Japan eeurop. Dummy Eastern Europe lamerica. Dummy Latin America ssafrica. Dummy Sub-Saharan Africa asia. Dummy Asia (including Japan) nafrme. Dummy North Africa/Middle East colbrit. Former British colony colfra. former French colony mtnest. Estimated percent mountainous terrain lmtnest. log mtnest elevdiff. high - low elevation, meters Oil. 1/3 export revenues fuels ncontig. noncontiguous state ethfrac. ethnic frac. based Soviet Atlas, plus estimates missing 1964 ef. ethnic fractionalization based Fearon 2002 APSA paper plural. share largest ethnic group (Fearon 2002 APSA) second. share 2nd largest ethnic group (Fearon 2002 APSA) numlang. number languages Ethnologue > min(1 relfrac. religious fractionalization plurrel. size largest confession minrelpc. size second largest confession muslim. percent muslim nwstate. 1 1st 2 years state's existence polity2l. lagged polity2, except 1st country series instab. > 2 change Polity measure last 3 yrs anocl. lagged anocracy (-6 < polity2l < 6) deml. lagged democracy (polity2l > 5) empethfrac. ethfrac coded colonial empires empwarl. warl coded data empires emponset. onset coded data empires empgdpenl. gdpenl coded empires data emplpopl. lpopl coded empires data emplmtnest. lmtnest coded empires data empncontig. ncontig coded empires empolity2l. polity2l adjusted empires (see fn38 paper) sdwars. number Sambanis/Doyle civ wars progress sdonset. onset Sambanis/Doyle war colwars. number Collier/Hoeffler wars progress colonset. onset Collier/Hoeffler war cowwars. number COW civ wars progress cowonset. onset COW civ war cowwarl. 1 COW war ongoing last period sdwarl. 1 S/D war ongoing last period colwarl. 1 C/H war ongoing last period","code":""},{"path":"https://mattblackwell.github.io/DirectEffects/reference/civilwar.html","id":"references","dir":"Reference","previous_headings":"","what":"References","title":"Data on civil wars and internal conflict from 1945-1999. ‚Äî civilwar","text":"Fearon, James D., David . Laitin (2003). Ethnicity, Insurgency, Civil War. American Political Science Review, 97(1), 75-90. doi:10.1017/S0003055403000534 Fearon, James D., David . Laitin (2003). Ethnicity, Insurgency, Civil War. American Political Science Review, 97(1), 75-90. doi:10.1017/S0003055403000534","code":""},{"path":"https://mattblackwell.github.io/DirectEffects/reference/estimate.html","id":null,"dir":"Reference","previous_headings":"","what":"Fit a specified CDE estimator ‚Äî estimate","title":"Fit a specified CDE estimator ‚Äî estimate","text":"Fit CDE estimator engines specified model_spec object.","code":""},{"path":"https://mattblackwell.github.io/DirectEffects/reference/estimate.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Fit a specified CDE estimator ‚Äî estimate","text":"","code":"estimate(   object,   formula,   data,   subset,   crossfit = TRUE,   n_folds,   n_splits = 1L )"},{"path":"https://mattblackwell.github.io/DirectEffects/reference/estimate.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Fit a specified CDE estimator ‚Äî estimate","text":"object cde_estimator object already passed least one call set_treatment. formula formula object describing outcome interest left-hand side treatment variables user wants estimate effects (might subset treatment variables specified). data data.frame containing variables, including treatment variables covariates specified. subset Anan optional vector specifying subset observations used fitting process. crossfit logical indicator cross-fitting used estimating effects. n_folds number folds use within given instance cross-fitting algorithm. n_splits number times cross-fitting procedure repeated. Overall estimates use median value repeated estimates.","code":""},{"path":"https://mattblackwell.github.io/DirectEffects/reference/jobcorps.html","id":null,"dir":"Reference","previous_headings":"","what":"Data on health and employment outcomes measured as part of the U.S. Job Corps employment training experiment. ‚Äî jobcorps","title":"Data on health and employment outcomes measured as part of the U.S. Job Corps employment training experiment. ‚Äî jobcorps","text":"dataset replicate analysis Huber (2014). dataset replicate analysis Huber (2014).","code":""},{"path":"https://mattblackwell.github.io/DirectEffects/reference/jobcorps.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Data on health and employment outcomes measured as part of the U.S. Job Corps employment training experiment. ‚Äî jobcorps","text":"","code":"data(jobcorps)  data(jobcorps)"},{"path":"https://mattblackwell.github.io/DirectEffects/reference/jobcorps.html","id":"format","dir":"Reference","previous_headings":"","what":"Format","title":"Data on health and employment outcomes measured as part of the U.S. Job Corps employment training experiment. ‚Äî jobcorps","text":"data frame 10025 observations 62 variables. data frame 10025 observations 62 variables.","code":""},{"path":"https://mattblackwell.github.io/DirectEffects/reference/jobcorps.html","id":"source","dir":"Reference","previous_headings":"","what":"Source","title":"Data on health and employment outcomes measured as part of the U.S. Job Corps employment training experiment. ‚Äî jobcorps","text":"doi:10.1002/jae.2341 doi:10.1002/jae.2341","code":""},{"path":"https://mattblackwell.github.io/DirectEffects/reference/jobcorps.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Data on health and employment outcomes measured as part of the U.S. Job Corps employment training experiment. ‚Äî jobcorps","text":"treat. 1 = program group. 0 = control group. schobef. \"school 1yr eligibility\" trainyrbef. \"training year Job Corps\" jobeverbef. \"ever job Job Corps\" jobyrbef. \"job year job corps\" health012.  \"good good health assignment\" health0mis.  \"general health assignment missing\" pe_prb0.  \"physical/emotional problems assignment\" pe_prb0mis. \"missing - physical/emotional problems assignment\" everalc. \"ever abused alcohol assignment\" alc12. \"alcohol abuse one yr assignment\" everilldrugs. \"ever took illegal drugs assignment\" age_cat. \"age application years 16-24\" edumis. \"education missing\" eduhigh. \"higher education\" rwhite. \"white\" everarr. \"ever arrested Job Corps\" hhsize. \"household size assignment\" hhsizemis. \"household size assignment missing\" hhinc12. \"low household income assignment\" hhinc8. \"high household income assignment\" fdstamp. \"received foodstamps yr assignment\" welf1. \"welfare growing \" welf2.  \"twice welfare growing \" publicass. \"public assistance yr assignment\" emplq. \"worked time 9-12 months assignment\" emplq4full. \"worked time 9-12 months assignment\" pemplq4. \"proportion weeks worked 9-12 months assignment\" pemplq4mis. \"missing - proportion weeks worked 9-12 months assignment\" vocq4.  \"vocational training 9-12 months assignment\" vocq4mis. \"missing - vocational training 9-12 months assignment\" health1212. \"good good health 1 yr assignment\" health123. \"fair health 1 yr assignment\" pe_prb12. \"1=phys/emot probs 12 mths 0=prob\" pe_prb12mis. \"missing - physical/emotional problems 1 yr assignment\" narry1. \"number arrests year 1\" numkidhhf1zero.  \"kids living household 1 yr assignment\" numkidhhf1onetwo. \"one two kids living household 1 yr assignment\" pubhse12.  \"1=public housing 1 yr assignment, 0=\" h_ins12a. \"afdc transfers one yr assignment\" h_ins12amis.  \"missing - afdc transfers one yr assignment\" ... variables annotated source. treat. 1 = program group. 0 = control group. schobef. \"school 1yr eligibility\" trainyrbef. \"training year Job Corps\" jobeverbef. \"ever job Job Corps\" jobyrbef. \"job year job corps\" health012.  \"good good health assignment\" health0mis.  \"general health assignment missing\" pe_prb0.  \"physical/emotional problems assignment\" pe_prb0mis. \"missing - physical/emotional problems assignment\" everalc. \"ever abused alcohol assignment\" alc12. \"alcohol abuse one yr assignment\" everilldrugs. \"ever took illegal drugs assignment\" age_cat. \"age application years 16-24\" edumis. \"education missing\" eduhigh. \"higher education\" rwhite. \"white\" everarr. \"ever arrested Job Corps\" hhsize. \"household size assignment\" hhsizemis. \"household size assignment missing\" hhinc12. \"low household income assignment\" hhinc8. \"high household income assignment\" fdstamp. \"received foodstamps yr assignment\" welf1. \"welfare growing \" welf2.  \"twice welfare growing \" publicass. \"public assistance yr assignment\" emplq. \"worked time 9-12 months assignment\" emplq4full. \"worked time 9-12 months assignment\" pemplq4. \"proportion weeks worked 9-12 months assignment\" pemplq4mis. \"missing - proportion weeks worked 9-12 months assignment\" vocq4.  \"vocational training 9-12 months assignment\" vocq4mis. \"missing - vocational training 9-12 months assignment\" health1212. \"good good health 1 yr assignment\" health123. \"fair health 1 yr assignment\" pe_prb12. \"1=phys/emot probs 12 mths 0=prob\" pe_prb12mis. \"missing - physical/emotional problems 1 yr assignment\" narry1. \"number arrests year 1\" numkidhhf1zero.  \"kids living household 1 yr assignment\" numkidhhf1onetwo. \"one two kids living household 1 yr assignment\" pubhse12.  \"1=public housing 1 yr assignment, 0=\" h_ins12a. \"afdc transfers one yr assignment\" h_ins12amis.  \"missing - afdc transfers one yr assignment\" ... variables annotated source.","code":""},{"path":"https://mattblackwell.github.io/DirectEffects/reference/jobcorps.html","id":"references","dir":"Reference","previous_headings":"","what":"References","title":"Data on health and employment outcomes measured as part of the U.S. Job Corps employment training experiment. ‚Äî jobcorps","text":"Huber, M. (2014). Identifying causal mechanisms (primarily) based inverse probability weighting. Journal Applied Econometrics, 29(6), 920-943. doi:10.1002/jae.2341 Huber, M. (2014). Identifying causal mechanisms (primarily) based inverse probability weighting. Journal Applied Econometrics, 29(6), 920-943. doi:10.1002/jae.2341","code":""},{"path":"https://mattblackwell.github.io/DirectEffects/reference/outreg_model.html","id":null,"dir":"Reference","previous_headings":"","what":"Specify the outcome regression model for a CDE treatment ‚Äî outreg_model","title":"Specify the outcome regression model for a CDE treatment ‚Äî outreg_model","text":"Specifies functional form estimation engine outcome regression treatment previously specified set_treatment() past history covariates.","code":""},{"path":"https://mattblackwell.github.io/DirectEffects/reference/outreg_model.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Specify the outcome regression model for a CDE treatment ‚Äî outreg_model","text":"","code":"outreg_model(   object,   formula,   engine,   separate = TRUE,   include_past = TRUE,   ... )"},{"path":"https://mattblackwell.github.io/DirectEffects/reference/outreg_model.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Specify the outcome regression model for a CDE treatment ‚Äî outreg_model","text":"object cde_estimator object contains output previous call set_treatment(). formula formula specifying design matrix covariates. Passed fitting engine used stats::model.frame() stats::model.matrix() create design matrix fitting engines take formulas. engine String indicating name fitting engine. separate Logical indicating whether fitting algorithm applied separately history treatment variables point (default) . include_past logical value TRUE indicates formulas passed previous treat_model calls appended formula given. ... arguments passed engine algorithms.","code":""},{"path":"https://mattblackwell.github.io/DirectEffects/reference/plot.cdesens.html","id":null,"dir":"Reference","previous_headings":"","what":"Plot output from cdesens ‚Äî plot.cdesens","title":"Plot output from cdesens ‚Äî plot.cdesens","text":"Plot output cdesens","code":""},{"path":"https://mattblackwell.github.io/DirectEffects/reference/plot.cdesens.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Plot output from cdesens ‚Äî plot.cdesens","text":"","code":"# S3 method for class 'cdesens' plot(   x,   level = 0.95,   xlim = NULL,   ylim = NULL,   xlab = NULL,   ylab = \"Estimated ACDE\",   bty = \"n\",   col = \"black\",   lwd = 2,   ci.col = \"grey70\",   ref.lines = TRUE,   ... )"},{"path":"https://mattblackwell.github.io/DirectEffects/reference/plot.cdesens.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Plot output from cdesens ‚Äî plot.cdesens","text":"x output cdesens level level confidence interval plot xlim x limits (x1, x2) plot sensitivity analysis parameter, rho. Default use range rho. ylim y limits plot estimated CDEs. Default show confidence intervals. xlab label x axis. ylab label y axis. bty character string determined type box drawn plots. Defaults drawing box. See par information. col color line indicating point estimates bias-adjusted ACDE. lwd line width line indicating point estimates bias-adjusted ACDE. ci.col color polygon shows confidence intervals. ref.lines logical indicating whether horizontal vertical lines 0 plotted. ... parameters pass plot()","code":""},{"path":"https://mattblackwell.github.io/DirectEffects/reference/plotDiag.tmatch.html","id":null,"dir":"Reference","previous_headings":"","what":"Histograms of matching weights ‚Äî plotDiag.tmatch","title":"Histograms of matching weights ‚Äî plotDiag.tmatch","text":"Histograms matching weights","code":""},{"path":"https://mattblackwell.github.io/DirectEffects/reference/plotDiag.tmatch.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Histograms of matching weights ‚Äî plotDiag.tmatch","text":"","code":"plotDiag.tmatch(object, stage)"},{"path":"https://mattblackwell.github.io/DirectEffects/reference/plotDiag.tmatch.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Histograms of matching weights ‚Äî plotDiag.tmatch","text":"object object class tmatch ‚Äì results call  telescope_match stage character vector equal name one treatment `object`.","code":""},{"path":"https://mattblackwell.github.io/DirectEffects/reference/plotDiag.tmatch.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Histograms of matching weights ‚Äî plotDiag.tmatch","text":"Outputs `plot()` object containing histogram match counts","code":""},{"path":"https://mattblackwell.github.io/DirectEffects/reference/plotDiag.tmatch.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Histograms of matching weights ‚Äî plotDiag.tmatch","text":"Provides histograms number times unit used match given tmatch object returned telescope_match","code":""},{"path":"https://mattblackwell.github.io/DirectEffects/reference/ploughs.html","id":null,"dir":"Reference","previous_headings":"","what":"Data on historical plough use and the socioeconomic status of women. ‚Äî ploughs","title":"Data on historical plough use and the socioeconomic status of women. ‚Äî ploughs","text":"dataset replicate analysis Alesina, Giuliano, Nunn (2013). dataset replicate analysis Alesina, Giuliano, Nunn (2013).","code":""},{"path":"https://mattblackwell.github.io/DirectEffects/reference/ploughs.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Data on historical plough use and the socioeconomic status of women. ‚Äî ploughs","text":"","code":"data(ploughs)  data(ploughs)"},{"path":"https://mattblackwell.github.io/DirectEffects/reference/ploughs.html","id":"format","dir":"Reference","previous_headings":"","what":"Format","title":"Data on historical plough use and the socioeconomic status of women. ‚Äî ploughs","text":"data frame 234 observations 57 variables. data frame 234 observations 57 variables.","code":""},{"path":"https://mattblackwell.github.io/DirectEffects/reference/ploughs.html","id":"source","dir":"Reference","previous_headings":"","what":"Source","title":"Data on historical plough use and the socioeconomic status of women. ‚Äî ploughs","text":"doi:10.1093/qje/qjt005 doi:10.1093/qje/qjt005","code":""},{"path":"https://mattblackwell.github.io/DirectEffects/reference/ploughs.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Data on historical plough use and the socioeconomic status of women. ‚Äî ploughs","text":"isocode. 3-letter code country. flfp2000. Female labor force participation 2000 female_ownership. Percent firms female ownership (  latest survey year) women_politics. Women Politics 2000, WDI plow. Animal plow cultivation variable (v39): Using   Ethnologue - pop weighted agricultural_suitability. overall (millets, sorghum, wheat,   barley, rye): share defined suitable tropical_climate. Frac land: tropics subtropics: using   Ethnologue - pop weighted large_animals. presence large animals political_hierarchies. Jurisdictional hierarchy beyond local   community (v33): Using Ethnologue - pop weighted economic_complexity. Settlement patterns (v30) ln_income. ln (income) ln_income_squared. ln (income) ^2 centered_ln_inc. de-meaned ln_inc centered_ln_incsq. de-meaned ln_inc squared country. country name communist_dummy. Communism indicator variable rugged. Ruggedness (Terrain Ruggedness Index, 100 m.) years_interstate_conflict. Years interstate conflict, 1800-2007 - COW serv_va_gdp2000. Value Added Service/GDP 2000 polity2_2000. Polity 2 measure taken Polity IV dataset oil_pc. oil production/GDP ... variables annotated source. isocode. 3-letter code country. flfp2000. Female labor force participation 2000 female_ownership. Percent firms female ownership (  latest survey year) women_politics. Women Politics 2000, WDI plow. Animal plow cultivation variable (v39): Using   Ethnologue - pop weighted agricultural_suitability. overall (millets, sorghum, wheat,   barley, rye): share defined suitable tropical_climate. Frac land: tropics subtropics: using   Ethnologue - pop weighted large_animals. presence large animals political_hierarchies. Jurisdictional hierarchy beyond local   community (v33): Using Ethnologue - pop weighted economic_complexity. Settlement patterns (v30) ln_income. ln (income) ln_income_squared. ln (income) ^2 centered_ln_inc. de-meaned ln_inc centered_ln_incsq. de-meaned ln_inc squared country. country name communist_dummy. Communism indicator variable rugged. Ruggedness (Terrain Ruggedness Index, 100 m.) years_interstate_conflict. Years interstate conflict, 1800-2007 - COW serv_va_gdp2000. Value Added Service/GDP 2000 polity2_2000. Polity 2 measure taken Polity IV dataset oil_pc. oil production/GDP ... variables annotated source.","code":""},{"path":"https://mattblackwell.github.io/DirectEffects/reference/ploughs.html","id":"references","dir":"Reference","previous_headings":"","what":"References","title":"Data on historical plough use and the socioeconomic status of women. ‚Äî ploughs","text":"Alesina, ., Giuliano, P., & Nunn, N. (2013). Origins Gender Roles: Women Plough. Quarterly Journal Economics, 128(2), 469-530. doi:10.1093/qje/qjt005 Alesina, ., Giuliano, P., & Nunn, N. (2013). Origins Gender Roles: Women Plough. Quarterly Journal Economics, 128(2), 469-530. doi:10.1093/qje/qjt005","code":""},{"path":"https://mattblackwell.github.io/DirectEffects/reference/reexports.html","id":null,"dir":"Reference","previous_headings":"","what":"Objects exported from other packages ‚Äî reexports","title":"Objects exported from other packages ‚Äî reexports","text":"objects imported packages. Follow links see documentation. generics glance, tidy","code":""},{"path":"https://mattblackwell.github.io/DirectEffects/reference/seq.g.vcov.html","id":null,"dir":"Reference","previous_headings":"","what":"Consistent Variance estimator ‚Äî seq.g.vcov","title":"Consistent Variance estimator ‚Äî seq.g.vcov","text":"Called internally sequential_g","code":""},{"path":"https://mattblackwell.github.io/DirectEffects/reference/seq.g.vcov.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Consistent Variance estimator ‚Äî seq.g.vcov","text":"","code":"# S3 method for class 'g.vcov' seq(first_mod, direct_mod, X1, X2, med.vars)"},{"path":"https://mattblackwell.github.io/DirectEffects/reference/seq.g.vcov.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Consistent Variance estimator ‚Äî seq.g.vcov","text":"first_mod first stage model direct_mod DirectEffects model terms X1 model matrix first stage model X2 model matrix DirectEffects model med.vars vector term.label attributes mediators","code":""},{"path":"https://mattblackwell.github.io/DirectEffects/reference/sequential_g.html","id":null,"dir":"Reference","previous_headings":"","what":"Perform linear sequential g-estimation to estimate the controlled direct effect of a treatment net the effect of a mediator. ‚Äî sequential_g","title":"Perform linear sequential g-estimation to estimate the controlled direct effect of a treatment net the effect of a mediator. ‚Äî sequential_g","text":"Perform linear sequential g-estimation estimate controlled direct effect treatment net effect mediator.","code":""},{"path":"https://mattblackwell.github.io/DirectEffects/reference/sequential_g.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Perform linear sequential g-estimation to estimate the controlled direct effect of a treatment net the effect of a mediator. ‚Äî sequential_g","text":"","code":"sequential_g(   formula,   data,   subset,   weights,   na.action,   offset,   contrasts = NULL,   verbose = TRUE,   ... )"},{"path":"https://mattblackwell.github.io/DirectEffects/reference/sequential_g.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Perform linear sequential g-estimation to estimate the controlled direct effect of a treatment net the effect of a mediator. ‚Äî sequential_g","text":"formula formula specification first-stage, second-stage, blip-models. right-hand side formula three components separated |, first component specifying first-stage model treatment baseline covariates, second component specifying intermediate covariates first-stage, third component specifying blip-model. See Details information. data dataframe apply formula . subset vector logicals indicating rows data keep. weights optional vector weights used fitting     process.  NULL numeric vector.     non-NULL, weighted least squares used weights     weights (, minimizing sum(w*e^2)); otherwise     ordinary least squares used.  See also ‚ÄòDetails‚Äô, na.action function indicates happen     data contain NAs.  default set     na.action setting options,     na.fail unset.  ‚Äòfactory-fresh‚Äô     default na.omit.  Another possible value     NULL, action.  Value na.exclude can useful. offset can used specify priori known     component included linear predictor fitting.     NULL numeric vector matrix extents     matching response.  One offset terms can     included formula instead well, one     specified sum used.  See model.offset. contrasts optional list. See contrasts.arg     model.matrix.default. verbose logical indicating whether suppress progress bar. Default FALSE. ... lm(): additional arguments passed low level     regression fitting functions (see ).","code":""},{"path":"https://mattblackwell.github.io/DirectEffects/reference/sequential_g.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Perform linear sequential g-estimation to estimate the controlled direct effect of a treatment net the effect of a mediator. ‚Äî sequential_g","text":"Returns object class \"seqg\". Similar output call lm. Contains following components: coefficients: vector named coefficients direct effects model. residuals: residuals, blipped-outcome minus fitted values. rank: numeric rank fitted linear direct effects model. fitted.values: fitted mean values direct effects model. weights: (weighted fits) specified weights. df.residual: residual degrees freedom direct effects model. aliased: logical vector indicating terms   dropped aliased due perfect collinearity. terms: list terms object used. One   baseline covariates treatment (X) one   variables blip-model (M). formula: formula object used, possibly modified drop constant blip-model. call: matched call. na.action: (relevant) information returned   model.frame special handling NAs. xlevels: levels factor variables. contrasts:  contrasts used factor variables. first_mod: output first-stage regression model. model: full model frame, including variables. Ytilde: blipped-response vector. X: model matrix second stage. M: model matrix demediation/blip-function. addition, non-null fits components assign, effects, qr output lm.fit lm.wfit, whichever used.","code":""},{"path":"https://mattblackwell.github.io/DirectEffects/reference/sequential_g.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Perform linear sequential g-estimation to estimate the controlled direct effect of a treatment net the effect of a mediator. ‚Äî sequential_g","text":"sequential_g function implements linear sequential g-estimator developed Vansteelandt (2009) consistent variance estimator developed Acharya, Blackwell, Sen (2016). formula specifies specifies full first-stage model   including treatment, baseline confounders, intermediate   confounders, mediators. user places | bars   separate different components model.   example, formula form y ~ tr + x1 + x2   | z1 + z2 | m1 + m2. tr name   treatment variable, x1 x2 baseline   covariates, z1 z2 intermediate covariates,   m1 m2 names mediator   variables. last set variables specify 'blip-'   'demediation' function used remove average effect   mediator (possibly interacted) outcome create   blipped-outcome. blipped-outcome passed   standard linear model covariates specified   direct effects model. See references details.","code":""},{"path":"https://mattblackwell.github.io/DirectEffects/reference/sequential_g.html","id":"references","dir":"Reference","previous_headings":"","what":"References","title":"Perform linear sequential g-estimation to estimate the controlled direct effect of a treatment net the effect of a mediator. ‚Äî sequential_g","text":"Vansteelandt, S. (2009). Estimating Direct Effects Cohort Case-Control Studies. Epidemiology, 20(6), 851-860. Acharya, Avidit, Blackwell, Matthew, Sen, Maya. (2016) \"Explaining Causal Effects Without Bias: Detecting Assessing Direct Effects.\" American Political Science Review 110:3 pp.   512-529","code":""},{"path":"https://mattblackwell.github.io/DirectEffects/reference/sequential_g.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Perform linear sequential g-estimation to estimate the controlled direct effect of a treatment net the effect of a mediator. ‚Äî sequential_g","text":"","code":"data(ploughs)  form_main <- women_politics ~ plow +   agricultural_suitability + tropical_climate + large_animals +   political_hierarchies + economic_complexity +   rugged | years_civil_conflict +   years_interstate_conflict  + oil_pc +   european_descent + communist_dummy + polity2_2000 +   serv_va_gdp2000 | centered_ln_inc + centered_ln_incsq  direct <- sequential_g(form_main, ploughs)  summary(direct) #>  #> t test of coefficients:  #>  #>                          Estimate Std. Err. t value Pr(>|t|)    #> (Intercept)              12.18450   3.64442  3.3433 0.001121 ** #> plow                     -4.83879   2.34467 -2.0637 0.041312 *  #> agricultural_suitability  4.57388   3.10477  1.4732 0.143458    #> tropical_climate         -2.18919   2.10505 -1.0400 0.300554    #> large_animals            -1.33001   3.40008 -0.3912 0.696401    #> political_hierarchies     0.49575   1.09060  0.4546 0.650283    #> economic_complexity      -0.10521   0.42973 -0.2448 0.807029    #> rugged                   -0.30869   0.47821 -0.6455 0.519888    #> --- #> Signif. codes:  0 ‚Äò***‚Äô 0.001 ‚Äò**‚Äô 0.01 ‚Äò*‚Äô 0.05 ‚Äò.‚Äô 0.1 ‚Äò ‚Äô 1 #>"},{"path":"https://mattblackwell.github.io/DirectEffects/reference/set_treatment.html","id":null,"dir":"Reference","previous_headings":"","what":"Specifiy a treatment variable for a controlled direct effect ‚Äî set_treatment","title":"Specifiy a treatment variable for a controlled direct effect ‚Äî set_treatment","text":"function specifies treatment variable sequence treatment variables define controlled direct effect interest.","code":""},{"path":"https://mattblackwell.github.io/DirectEffects/reference/set_treatment.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Specifiy a treatment variable for a controlled direct effect ‚Äî set_treatment","text":"","code":"set_treatment(   object,   treat,   formula = NULL,   treat_type = \"categorical\",   eval_vals = NULL )"},{"path":"https://mattblackwell.github.io/DirectEffects/reference/set_treatment.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Specifiy a treatment variable for a controlled direct effect ‚Äî set_treatment","text":"object cde_estimator object may may previous treatment variables specified/ treat Name treatment variable (quoted). formula One-sided formula giving covariates pre-treatment treatment, post-treatment previous treatment. Unless overridden arguments treat_model() outreg_model(), formula specification used modeling propensity scores outcome regressions. treat_type string indicating type variable . Takes either values \"categorical\" \"regression\" (latter yet implemented). eval_vals numeric vector values variable evaluate controlled direct effecct. NULL (default), set observed values variable.","code":""},{"path":"https://mattblackwell.github.io/DirectEffects/reference/set_treatment.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Specifiy a treatment variable for a controlled direct effect ‚Äî set_treatment","text":"updated cde_estimator information treatment specified.","code":""},{"path":"https://mattblackwell.github.io/DirectEffects/reference/set_treatment.html","id":"author","dir":"Reference","previous_headings":"","what":"Author","title":"Specifiy a treatment variable for a controlled direct effect ‚Äî set_treatment","text":"Matthew Blackwell","code":""},{"path":"https://mattblackwell.github.io/DirectEffects/reference/summary.seqg.html","id":null,"dir":"Reference","previous_headings":"","what":"Computes standard errors and p-values of DirectEffects estimates ‚Äî summary.seqg","title":"Computes standard errors and p-values of DirectEffects estimates ‚Äî summary.seqg","text":"Computes standard errors p-values DirectEffects estimates","code":""},{"path":"https://mattblackwell.github.io/DirectEffects/reference/summary.seqg.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Computes standard errors and p-values of DirectEffects estimates ‚Äî summary.seqg","text":"","code":"# S3 method for class 'seqg' summary(object, ...)"},{"path":"https://mattblackwell.github.io/DirectEffects/reference/summary.seqg.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Computes standard errors and p-values of DirectEffects estimates ‚Äî summary.seqg","text":"object object class seqg, computed sequential_g. ... additional arguments affecting summary produced.","code":""},{"path":"https://mattblackwell.github.io/DirectEffects/reference/summary.seqgboots.html","id":null,"dir":"Reference","previous_headings":"","what":"Summary of DirectEffect Bootstrap Estimates ‚Äî summary.seqgboots","title":"Summary of DirectEffect Bootstrap Estimates ‚Äî summary.seqgboots","text":"Summary DirectEffect Bootstrap Estimates","code":""},{"path":"https://mattblackwell.github.io/DirectEffects/reference/summary.seqgboots.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Summary of DirectEffect Bootstrap Estimates ‚Äî summary.seqgboots","text":"","code":"# S3 method for class 'seqgboots' summary(object, level = 0.95, ...)"},{"path":"https://mattblackwell.github.io/DirectEffects/reference/summary.seqgboots.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Summary of DirectEffect Bootstrap Estimates ‚Äî summary.seqgboots","text":"object output class seqg estimated boots_g. level level intervals estimate. Defaults 0.95 ... additional arguments affecting summary produced.","code":""},{"path":"https://mattblackwell.github.io/DirectEffects/reference/summary.tmatch.html","id":null,"dir":"Reference","previous_headings":"","what":"Summarize telescope match objects ‚Äî summary.tmatch","title":"Summarize telescope match objects ‚Äî summary.tmatch","text":"Summarize telescope match objects","code":""},{"path":"https://mattblackwell.github.io/DirectEffects/reference/summary.tmatch.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Summarize telescope match objects ‚Äî summary.tmatch","text":"","code":"# S3 method for class 'tmatch' summary(object, ...)"},{"path":"https://mattblackwell.github.io/DirectEffects/reference/summary.tmatch.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Summarize telescope match objects ‚Äî summary.tmatch","text":"object object class tmatch ‚Äì results call telescope_match ... additional arguments affecting summary produced.","code":""},{"path":"https://mattblackwell.github.io/DirectEffects/reference/summary.tmatch.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Summarize telescope match objects ‚Äî summary.tmatch","text":"Returns object class summary.tmatch. Contains following components call: matched call. m_summary: data.frame summarizes matching     ratios ({ratio}), number units n_1, n_0,     number matched units (matched_1, matched_0)     treatment/mediator (term). K: K data frame object     telescope matching output. L: L vector object     telescope matching output. a_names: character vector names     treatment/mediator variables used matching. estimates: matrix estimated ACDEs     without bias correction estimated standard errors.","code":""},{"path":"https://mattblackwell.github.io/DirectEffects/reference/summary.tmatch.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Summarize telescope match objects ‚Äî summary.tmatch","text":"summary method tmatch objects returned telescope_match Returns summary data frame containing estimate standard errors `telescope_match` object.","code":""},{"path":"https://mattblackwell.github.io/DirectEffects/reference/telescope_match.html","id":null,"dir":"Reference","previous_headings":"","what":"Perform telescope matching to estimate the controlled direct effect of a binary treatment net the effect of binary mediators ‚Äî telescope_match","title":"Perform telescope matching to estimate the controlled direct effect of a binary treatment net the effect of binary mediators ‚Äî telescope_match","text":"Perform telescope matching estimate controlled direct effect binary treatment net effect binary mediators","code":""},{"path":"https://mattblackwell.github.io/DirectEffects/reference/telescope_match.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Perform telescope matching to estimate the controlled direct effect of a binary treatment net the effect of binary mediators ‚Äî telescope_match","text":"","code":"telescope_match(   formula,   data,   caliper = NULL,   L = 5,   verbose = TRUE,   subset,   contrasts = NULL,   separate_bc = TRUE,   ... )"},{"path":"https://mattblackwell.github.io/DirectEffects/reference/telescope_match.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Perform telescope matching to estimate the controlled direct effect of a binary treatment net the effect of binary mediators ‚Äî telescope_match","text":"formula formula object specifies covariates treatment variables (mediators) causal ordering oldest newest group separated |. See   details. data dataframe containing variables referenced formula. caliper scalar denoting caliper used matching treatment stage (calipers used matching mediator). Observations outside caliper dropped. Calipers specified standard deviations covariates. NULL default (caliper). L Number matches use unit. Must numeric vector either length 1 2. length 1, L sets number matches used first stage (matching mediator) second stage (matching treatment). length 2, first element sets number matches used first stage (matching mediator) second element sets number matches used second stage (matching treatment) Default 5. verbose logical indicating whether display progress information. Default TRUE. subset vector logicals indicating rows data keep. contrasts list passed contrasts.arg argument model.matrix() generating data matrix. separate_bc logical indicating whether bias correction regressions run separately within levels treatment mediator. Defaults TRUE. TRUE, interactions treatment/mediator covariates specification omitted. ... lm(): additional arguments passed low level     regression fitting functions (see ).","code":""},{"path":"https://mattblackwell.github.io/DirectEffects/reference/telescope_match.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Perform telescope matching to estimate the controlled direct effect of a binary treatment net the effect of binary mediators ‚Äî telescope_match","text":"Returns object class tmatch. Contains following components call: matched call. formula: formula used fit model. m_out: list matching solutions time     point. member list `matches` list giving     units matched unit, `donors` list units     unit matched, `tr` vector just     treatment vector matched. K: data.frame indicating many times unit     used match, directly period indirectly     across periods. L: vector matching ratios used period. r_out: nested list regression imputations used     bias correction. first level list varies across     different controlled direct effects (different sequences future     treatments/mediators). list time periods     time periods list `yhat_r_0` `yhat_r_1`     give regression predictions potential outcomes     time point treatment time point 0 1,     respectively, along `n_coefs` giving number     coefficients estimated models. tau: vector bias-corrected estimates average     controlled direct effects different vectors future     treatments/mediators. tau_raw: vector standard matching estimates average     controlled direct effects different vectors future     treatments/mediators without using bias correction. tau_se: vector estimated standard errors average     controlled direct effects estimates different vectors future     treatments/mediators. tau_i: matrix individuals contributions ACDE     estimates (units rows, different ACDEs columns). Used     weighted bootstrap. included: logical vector indicating row     data included estimating tau. effects: data frame row describes     different ACDEs tau. active column describes     variable's direct effect assessed rest     columns describe fixed values future     treatments/mediators ACDE. a_names: character vector names     treatment/mediator variables used estimation. caliper: caliper () used matching drop     distant observations.","code":""},{"path":"https://mattblackwell.github.io/DirectEffects/reference/telescope_match.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Perform telescope matching to estimate the controlled direct effect of a binary treatment net the effect of binary mediators ‚Äî telescope_match","text":"telescope_match function implements   two-stage \"telescope matching\" procedure developed Blackwell   Strezhnev (2021). procedure first estimates demediated outcome using  combination matching regression bias-correction.  data.frame passed data wide  format row corresponds single unit  treatments covariates different time periods appear  different columns. formula argument specifies  causal ordering variables regression specifications  bias correction. form Y ~ X1 |  A1 | X2 | A2, Y outcome, X1  formula baseline covariates, A1 single variable  name indicating binary treatment first period,  X2 formula covariates period 2, A2  single variable name indicating treatment period 2 ( also sometimes called mediator). Note possible  add covariate/treatment pairs additional time periods. default separate_bc == TRUE, function match treatment/mediator based covariates point within levels past treatments (A2 matching finds units similar values X1 X2 value A1). matching complete, function moves backward treatments imputes potential outcomes using matches bias-correction regressions, regress current imputed potential outcome past covariates, within levels treatment history current period. functional form comes specification formula. Controlled direct effects A1 estimated every possible combination future treatments. separate_bc FALSE, bias correction regressions broken treatments/mediators variables simply included separate regressors specified formula. setting, interactions treatment/mediator covariates can added selective basis covariate block (X1 X2 ) specifications. Matching performed using Match() routine Matching package. default, matching L--1 nearest neighbor replacement using Mahalanobis distance. See references details.","code":""},{"path":"https://mattblackwell.github.io/DirectEffects/reference/telescope_match.html","id":"references","dir":"Reference","previous_headings":"","what":"References","title":"Perform telescope matching to estimate the controlled direct effect of a binary treatment net the effect of binary mediators ‚Äî telescope_match","text":"Blackwell, Matthew, Strezhnev, Anton (2020) \"Telescope Matching: Reducing Model Dependence Estimation Direct Effects.\" Journal Royal Statistical Society (Series ). doi:10.1111/rssa.12759","code":""},{"path":"https://mattblackwell.github.io/DirectEffects/reference/telescope_match.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Perform telescope matching to estimate the controlled direct effect of a binary treatment net the effect of binary mediators ‚Äî telescope_match","text":"","code":"data(jobcorps)  ## Split male/female jobcorps_female <- subset(jobcorps, female == 1)  ## Telescope matching formula - First stage (X and Z) tm_form <- exhealth30 ~  schobef + trainyrbef + jobeverbef  | treat | emplq4 + emplq4full | work2year2q   ### Estimate ACDE for women holding employment at 0 tm_out <-  telescope_match(   tm_form,   data = jobcorps_female,   L = 3,   boot = FALSE,   verbose = TRUE ) #> Beginning matching... #> Matching work2year2q... #> Matching treat... #> Beginning bias correction..."},{"path":"https://mattblackwell.github.io/DirectEffects/reference/transphobia.html","id":null,"dir":"Reference","previous_headings":"","what":"Data from a randomized experiment on transgender rights. ‚Äî transphobia","title":"Data from a randomized experiment on transgender rights. ‚Äî transphobia","text":"dataset Broockman Kalla (2016).","code":""},{"path":"https://mattblackwell.github.io/DirectEffects/reference/transphobia.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Data from a randomized experiment on transgender rights. ‚Äî transphobia","text":"","code":"data(transphobia)"},{"path":"https://mattblackwell.github.io/DirectEffects/reference/transphobia.html","id":"format","dir":"Reference","previous_headings":"","what":"Format","title":"Data from a randomized experiment on transgender rights. ‚Äî transphobia","text":"data frame 501 observations 19 variables.","code":""},{"path":"https://mattblackwell.github.io/DirectEffects/reference/transphobia.html","id":"source","dir":"Reference","previous_headings":"","what":"Source","title":"Data from a randomized experiment on transgender rights. ‚Äî transphobia","text":"doi:10.1126/science.aad9713","code":""},{"path":"https://mattblackwell.github.io/DirectEffects/reference/transphobia.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Data from a randomized experiment on transgender rights. ‚Äî transphobia","text":"treated. Indicator transgender rights script (1) vs  recycling script (0). nondiscrim_law_t3. Support transgender  nondiscrimination law six weeks treatment. therm_trans_t2. Subjective feelings  transgender people three weeks treatment (0 = cool,  1 = neutral, 2 = warm). therm_obama_t1. Feeling thermometer score (0-100)  feeling warmth coolness toward Barack Obama 3 days  treatment. gender_norm_moral_t1. Index moral attitudes  gender 3 days treatment. nondiscrim_law_t0. Baseline support transgender  nondiscrimination law. therm_trans_t0. Baseline subjective feelings  transgender people (0 = cool, 1 = neutral, 2 = warm). therm_obama_t0. Baseline feeling thermometer score (0-100)  feeling warmth coolness toward Barack Obama. gender_norm_moral_t0. Baseline index moral attitudes  gender. ideology_t0. Baseline measure ideology (conservative higher). religious_t0. Baseline measure religiousity. exposure_trans_t0. Baseline indicator personal exposure  transgender people (1) (0). pid_t0. Baseline party identification (-3 = Strong Democrat,   3 = Strong Republican). vf_democrat. Indicator unit identifies Democrat  voter file (1) (0). vf_female. Indicator unit identifies woman  voter file (1) (0). vf_hispanic. Indicator unit identifies Hispanic  voter file (1) (0). vf_black. Indicator unit identifies Black  voter file (1) (0). vf_age. Age citizen voter file. nondiscrim_law_diff. Difference nondiscrim_law_t3  nondiscrim_law_t0","code":""},{"path":"https://mattblackwell.github.io/DirectEffects/reference/transphobia.html","id":"references","dir":"Reference","previous_headings":"","what":"References","title":"Data from a randomized experiment on transgender rights. ‚Äî transphobia","text":"Broockman, D. & Kalla, J. (2016). Durably reducing transphobia:   field experiment door--door canvassing. Science, 352(6282),   220-224. doi:10.1126/science.aad9713","code":""},{"path":"https://mattblackwell.github.io/DirectEffects/reference/treat_model.html","id":null,"dir":"Reference","previous_headings":"","what":"Specify the propensity score model for a CDE treatment ‚Äî treat_model","title":"Specify the propensity score model for a CDE treatment ‚Äî treat_model","text":"Specifies functional form estimation engine treatment previously specified set_treatment().","code":""},{"path":"https://mattblackwell.github.io/DirectEffects/reference/treat_model.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Specify the propensity score model for a CDE treatment ‚Äî treat_model","text":"","code":"treat_model(object, formula, engine, separate = TRUE, include_past = TRUE, ...)"},{"path":"https://mattblackwell.github.io/DirectEffects/reference/treat_model.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Specify the propensity score model for a CDE treatment ‚Äî treat_model","text":"object cde_estimator object contains output previous call set_treatment(). formula formula specifying design matrix covariates. Passed fitting engine used stats::model.frame() stats::model.matrix() create design matrix fitting engines take formulas. engine String indicating name fitting engine. separate Logical indicating whether fitting algorithm applied separately history treatment variables point (default) . include_past logical value TRUE indicates formulas passed previous treat_model calls appended formula given. ... arguments passed engine algorithms.","code":""},{"path":"https://mattblackwell.github.io/DirectEffects/reference/treat_model.html","id":"author","dir":"Reference","previous_headings":"","what":"Author","title":"Specify the propensity score model for a CDE treatment ‚Äî treat_model","text":"Matthew Blackwell","code":""}]
